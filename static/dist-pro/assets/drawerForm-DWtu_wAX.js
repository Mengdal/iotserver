import{c as we,_ as Se}from"./index-CAdyeJt3.js";import{d as M,i as ue,b as $,v as Oe,p as D}from"./element-plus--V1NSjC4.js";import{_ as K}from"./Table.vue_vue_type_script_lang-D3v-kC-o.js";import oe from"./EnumInputComponent-BjK-eMKZ.js";import{x as Ce}from"./index-BTXJkdku.js";import{x as Ue,r as _,X as G,c as se,P as s,n as H,ag as w,y as i,z as y,H as d,u as o,O as k,a4 as N,G as f,K as g,A as b,M as V,L as U,aa as qe}from"./vue-chunks-C1K3ngR7.js";/* empty css                        *//* empty css                *//* empty css                  *//* empty css               */import"./el-checkbox-group-Cm0j4lwI.js";/* empty css                *//* empty css                         *//* empty css                  *//* empty css                       */import"./index-DfycOL0q.js";const Fe=(q,R,t)=>{if(!R)return t(new Error("请输入标识符"));if(/^[0-9]/.test(R))return t(new Error("标识符不能以数字开头"));if(!/^[a-zA-Z0-9\-_#@\s]+$/.test(R))return t(new Error("只能包含英文字母、数字、空格和符号 - _ # @"));t()},S={featureTypes:[{value:"attribute",label:"属性类型"},{value:"event",label:"事件类型"},{value:"serve",label:"服务类型"}],dataTypes:[{value:"int",label:"整数型(int)"},{value:"float",label:"浮点型(float)"},{value:"text",label:"字符串型(text)"},{value:"double",label:"双精度型(double)"},{value:"bool",label:"布尔型(bool)"},{value:"enum",label:"枚举型(enum)"}],envent_type:[{value:"info",label:"信息"},{value:"alert",label:"警告"},{value:"error",label:"故障"}],readWriteType:[{value:"r",label:"只读"},{value:"w",label:"读写"}],callMethodOptions:[{value:"SYNC",label:"同步"},{value:"ASYNC",label:"异步"}],valueTypeOptions:[{value:"S",label:"瞬时量"},{value:"L",label:"累积量"},{value:"K",label:"开关量"},{value:"C",label:"产量"},{value:"YL",label:"用量"}],rules:{typeValue:[{required:!0,message:"请选择功能类型",trigger:"change"}],name:[{required:!0,message:"请输入功能名称",trigger:"blur"}],code:[{required:!0,message:"请输入标识符",trigger:"blur"},{validator:Fe,trigger:"blur"}],type_spec:[{required:!0,message:"请选择数据类型",trigger:"change"}],read_write:[{required:!0,message:"请选择读写类型",trigger:"change"}],min:[{required:!0,message:"请输入最小值",trigger:"blur"}],max:[{required:!0,message:"请输入最大值",trigger:"blur"}],step:[{required:!0,message:"请输入步长",trigger:"blur"}],range:[{required:!0,message:"请输入范围",trigger:"blur"}],length:[{required:!0,message:"请输入长度",trigger:"blur"}],true_value:[{required:!0,message:"请输入真值",trigger:"blur"}],false_value:[{required:!0,message:"请输入假值",trigger:"blur"}],envent_type:[{required:!0,message:"请选择事件类型",trigger:"change"}],valueType:[{required:!0,message:"请选择值类型",trigger:"change"}],callMethod:[{required:!0,message:"请选择调用方式",trigger:"change"}]},paramRules:{name:[{required:!0,message:"请输入参数名称",trigger:"blur"}],code:[{required:!0,message:"请输入标识符",trigger:"blur"}],type_spec:[{required:!0,message:"请选择数据类型",trigger:"change"}],step:[{required:!0,message:"请输入步长",trigger:"blur"}],length:[{required:!0,message:"请输入长度",trigger:"blur"}],true_value:[{required:!0,message:"请输入真值",trigger:"blur"}],false_value:[{required:!0,message:"请输入假值",trigger:"blur"}]}},Me={key:0},Re={key:0},je={key:1},Ie={class:"el-form-item__label"},$e={key:2},Ae={key:1},Ee={class:"el-form-item__label label"},Be={style:{"margin-left":"10px",color:"rgba(0, 0, 0, 0.45)","font-size":"12px"}},Je={key:2},ze={class:"el-form-item__label label"},Le={style:{"margin-left":"10px",color:"rgba(0, 0, 0, 0.45)","font-size":"12px"}},We={key:0},Ye={style:{"margin-bottom":"18px"}},De={class:"el-form-item__label label"},Ke={class:"range-inputs"},Ge={key:1},He={class:"el-form-item__label"},Qe={key:3};function A(q){return typeof q=="function"||Object.prototype.toString.call(q)==="[object Object]"&&!qe(q)}const Xe=Ue({__name:"drawerForm",props:{productId:{type:[String,Number],required:!0}},setup(q,{expose:R}){const{t}=we(),Q=q,X=_(0),E=_(t("device.inputParameters")),P=_(null),B=_(!1),v=_(!1),ne=_(!1),J=_(),z=_(),O=_(!1),C=_(-1),F=_("output"),L=_([]),u=G({typeValue:"attribute",valueType:"",name:"",code:"",type_spec:"",read_write:"",description:"",min:0,max:1,step:1,unit:"",length:0,true_value:"",false_value:"",envent_type:"",callMethod:"",inputParams:[],outputParams:[],specs:[],type:""}),c=G({name:"",code:"",type_spec:"",min:0,max:0,step:"",unit:"",length:0,true_value:"",false_value:"",specs:[]}),re=S.featureTypes,Z=S.dataTypes,pe=S.valueTypeOptions,de=S.readWriteType,ie=S.envent_type,ce=S.callMethodOptions,me=G(S.rules),ve=S.paramRules;_("添加结构体");const I=_(t("device.addParam")),be=se(()=>["int","float","double"].includes(u.type_spec)),ye=se(()=>(c.type_spec,["int","float","double"].includes(c.type_spec))),j=p=>{},fe=()=>new Promise((p,e)=>{if(!z.value){e(new Error(t("device.formNotInitialized")));return}z.value.validate(r=>{r?p({...u}):e(new Error(t("device.formValidationFailed")))})}),_e=()=>({...u}),W=p=>{if(F.value=p,X.value++,(p==="input"?u.inputParams:u.outputParams).length>=50){$.warning(t("device.maxFiftyParameters"));return}Object.assign(c,{name:"",code:"",type_spec:"",min:0,max:1,step:1,unit:"",length:0,true_value:"",false_value:"",specs:[]}),I.value=t("device.addParam"),C.value=-1,O.value=!0},ge=()=>{J.value&&J.value.validate(p=>{if(p){const e=F.value==="input"?u.inputParams:u.outputParams;F.value,C.value,C.value===-1?e.push({...c}):e[C.value]={...c},O.value=!1}})},Ve=[{field:"name",label:t("device.name")},{field:"code",label:t("device.identifier")},{field:"type_spec",label:t("device.dataType")},{field:"action",label:t("device.operation"),slots:{default:p=>{let e,r;return s("div",null,[s(M,{type:"primary",text:!0,onClick:()=>le(p.row,"edit",p.$index)},A(e=t("device.edit"))?e:{default:()=>[e]}),s(M,{type:"danger",text:!0,onClick:()=>le(p.row,"del",p.$index)},A(r=t("device.delete"))?r:{default:()=>[r]})])}}}],ee=[{field:"name",label:t("device.name")},{field:"code",label:t("device.identifier")},{field:"type_spec",label:t("device.dataType")},{field:"action",label:t("device.operation"),slots:{default:p=>{let e,r;return s("div",null,[s(M,{type:"primary",text:!0,onClick:()=>te(p.row,"edit",p.$index)},A(e=t("device.edit"))?e:{default:()=>[e]}),s(M,{type:"danger",text:!0,onClick:()=>te(p.row,"del",p.$index)},A(r=t("device.delete"))?r:{default:()=>[r]})])}}}],le=async(p,e,r)=>{e==="edit"?(F.value="input",Object.assign(c,{...p}),P.value&&(P.value,P.value.items=[],await H()),I.value=t("device.editParameters"),E.value=t("device.inputParameters"),C.value=r,O.value=!0,await H()):e==="del"&&ue.confirm(t("common.delMessage"),t("common.delWarning"),{confirmButtonText:t("common.ok"),cancelButtonText:t("common.cancel"),type:"warning"}).then(()=>{u.inputParams.splice(r,1),$.success(t("device.operationSuccess"))})},te=async(p,e,r)=>{e==="edit"?(F.value="output",Object.assign(c,{...p}),P.value&&(P.value,P.value.items=[],await H()),E.value=t("device.outputParameters"),I.value=t("device.editParameters"),C.value=r,O.value=!0):e==="del"&&ue.confirm(t("common.delMessage"),t("common.delWarning"),{confirmButtonText:t("common.ok"),cancelButtonText:t("common.cancel"),type:"warning"}).then(()=>{u.outputParams.splice(r,1),$.success(t("device.operationSuccess"))})},xe=()=>{},ae=()=>{Object.assign(u,{typeValue:"attribute",name:"",code:"",type_spec:"",read_write:"",description:"",min:0,max:1,step:1,unit:"",length:0,true_value:"",false_value:"",envent_type:"",callMethod:"",inputParams:[],outputParams:[]}),Object.assign(c,{name:"",code:"",type_spec:"",min:0,max:1,step:1,unit:"",length:0,true_value:"",false_value:""})},he=(p,e)=>{if(e=="view"?(v.value=!0,B.value=!0):e=="edit"&&(v.value=!1,B.value=!0),ae(),u.name=p.name||"",u.code=p.code||"",u.description=p.description||"",u.type=p.type||"",p.__type==="attribute"&&(u.typeValue="attribute",u.read_write=p.access_mode==="R"?"r":"rw",p.type_spec))try{const r=JSON.parse(p.type_spec);if(u.type_spec=r.type||"",r.specs){const n=JSON.parse(r.specs);u.min=Number(n.min)||0,u.max=Number(n.max)||0,u.valueType=n.valueType||"",u.step=n.step||"",n.unitName,u.unit=n.unitName||n.unit,r.type==="text"&&r.specs.length&&(u.length=Number(r.specs.length)||0),r.type==="bool"&&(u.true_value=r.specs[1]||"",u.false_value=r.specs[0]||""),r.type==="enum"&&(u.specs=n.map(a=>{const[m,T]=Object.entries(a)[0];return{key:Number(m)||m,value:T}}))}}catch(r){console.error("解析 type_spec 失败:",r)}if(p.__type==="event"){if(u.typeValue="event",u.envent_type=p.event_type||"",p.output_params){const r=JSON.parse(p.output_params);if(r)u.outputParams=r.map(n=>{let a={type:"",specs:{}};try{n.type_spec&&typeof n.type_spec=="string"?a=JSON.parse(n.type_spec):n.type_spec&&typeof n.type_spec=="object"&&(a=n.type_spec)}catch(m){console.error("解析 type_spec 失败:",m)}if(a.type==="enum"){let m=[];return a.specs,a.specs,m=Object.entries(a.specs).map(([x,h])=>({[x]:h})).map(x=>{const[h,Y]=Object.entries(x)[0];return{key:Number(h)||h,value:Y}}),{name:n.name||"",code:n.code||"",type_spec:a.type||"",specs:m}}return{name:n.name||"",code:n.code||"",type_spec:a.type||"",min:a.specs?.min?Number(a.specs.min):0,max:a.specs?.max?Number(a.specs.max):0,step:a.specs?.step||"",unit:a.specs?.unit||"",length:a.specs?.length?Number(a.specs.length):0,true_value:a.specs?.["1"]||"",false_value:a.specs?.["0"]||"",specs:a.specs}});else return{name:"",code:"",type_spec:"",min:0,max:1,step:1,unit:"",length:0,true_value:"",false_value:"",specs:""}}}else if(p.__type==="serve"){if(u.typeValue="serve",u.callMethod=p.call_type==="SYNC"?"SYNC":"ASYNC",p.input_params)try{const r=JSON.parse(p.input_params);if(r)u.inputParams=r.map(n=>{let a={type:"",specs:{}};n.type_spec,n.type_spec;try{n.type_spec&&typeof n.type_spec=="string"?a=JSON.parse(n.type_spec):n.type_spec&&typeof n.type_spec=="object"&&(a=n.type_spec)}catch(m){console.error("解析 type_spec 失败:",m)}if(a.type==="enum"&&a.specs){a.specs;const m=a.specs.map(T=>{const[x,h]=Object.entries(T)[0];return{key:Number(x)||x,value:h}});return{name:n.name||"",code:n.code||"",type_spec:a.type||"",specs:m}}return{name:n.name||"",code:n.code||"",type_spec:a.type||"",min:a.specs?.min?Number(a.specs.min):0,max:a.specs?.max?Number(a.specs.max):0,step:a.specs?.step||"",unit:a.specs?.unit||"",length:a.specs?.length?Number(a.specs.length):0,true_value:a.specs?.["1"]||"",false_value:a.specs?.["0"]||"",specs:a.specs}});else return{name:"",code:"",type_spec:"",min:0,max:1,step:1,unit:"",length:0,true_value:"",false_value:"",specs:0}}catch(r){console.error("解析 input_params 失败:",r),u.inputParams=[]}if(p.output_params)try{const r=JSON.parse(p.output_params);if(r)u.outputParams=r.map(n=>{let a={type:"",specs:{}};try{n.type_spec&&typeof n.type_spec=="string"?a=JSON.parse(n.type_spec):n.type_spec&&typeof n.type_spec=="object"&&(a=n.type_spec)}catch(m){console.error("解析 type_spec 失败:",m)}if(a.type==="enum"&&a.specs){a.specs;const m=a.specs.map(T=>{const[x,h]=Object.entries(T)[0];return{key:Number(x)||x,value:h}});return{name:n.name||"",code:n.code||"",type_spec:a.type||"",specs:m}}return{name:n.name||"",code:n.code||"",type_spec:a.type||"",min:a.specs?.min?Number(a.specs.min):0,max:a.specs?.max?Number(a.specs.max):0,step:a.specs?.step||"",unit:a.specs?.unit||"",length:a.specs?.length?Number(a.specs.length):0,true_value:a.specs?.["1"]||"",false_value:a.specs?.["0"]||""}});else return{name:"",code:"",type_spec:"",min:0,max:1,step:1,unit:"",length:0,true_value:"",false_value:""}}catch(r){console.error("解析 output_params 失败:",r),u.outputParams=[]}}},Te=p=>{L.value=p},ke=Oe(async(p,e)=>{try{if(!Q.productId)return $.warning(t("device.pleaseSelectProductFirst")),e([]);const r=await Ce({productId:Q.productId,name:p});if(r.code===200){const n=r.data.map(a=>({value:a,label:a}));e(n)}else e([])}catch(r){console.error("查询标签失败:",r),e([])}},500),Pe=(p,e)=>{ke(p,e)},Ne=()=>{};return R({modalForm:u,validateForm:fe,getFormData:_e,resetForm:ae,setFormData:he,setUnitOptions:Te}),(p,e)=>{const r=w("el-option"),n=w("el-select"),a=w("el-form-item"),m=w("el-input"),T=w("el-icon"),x=w("el-autocomplete"),h=w("el-form"),Y=w("el-drawer");return i(),y(k,null,[s(h,{model:u,rules:me,ref_key:"ruleFormRef",ref:z,"label-position":"top"},{default:d(()=>[s(a,{label:o(t)("device.functionType"),prop:"typeValue"},{default:d(()=>[s(n,{modelValue:u.typeValue,"onUpdate:modelValue":e[0]||(e[0]=l=>u.typeValue=l),onChange:e[1]||(e[1]=l=>j("feature")),disabled:B.value},{default:d(()=>[(i(!0),y(k,null,N(o(re),l=>(i(),f(r,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"]),s(a,{label:o(t)("device.functionName"),prop:"name"},{default:d(()=>[s(m,{modelValue:u.name,"onUpdate:modelValue":e[2]||(e[2]=l=>u.name=l),placeholder:o(t)("common.inputText"),disabled:v.value},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(a,{label:o(t)("device.identifier"),prop:"code"},{default:d(()=>[s(m,{modelValue:u.code,"onUpdate:modelValue":e[3]||(e[3]=l=>u.code=l),placeholder:o(t)("common.inputText"),disabled:v.value},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),u.typeValue==="attribute"?(i(),y("div",Me,[s(a,{label:o(t)("device.dataType"),prop:"type_spec"},{default:d(()=>[s(n,{modelValue:u.type_spec,"onUpdate:modelValue":e[4]||(e[4]=l=>u.type_spec=l),onChange:e[5]||(e[5]=l=>j("type_spec")),placeholder:o(t)("common.selectText"),disabled:v.value},{default:d(()=>[(i(!0),y(k,null,N(o(Z),l=>(i(),f(r,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),be.value?(i(),y("div",Re,[s(a,{label:o(t)("device.valueType"),prop:"valueType"},{default:d(()=>[s(n,{modelValue:u.valueType,"onUpdate:modelValue":e[6]||(e[6]=l=>u.valueType=l),disabled:v.value},{default:d(()=>[(i(!0),y(k,null,N(o(pe),l=>(i(),f(r,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"]),s(a,{label:o(t)("device.step"),prop:"step"},{default:d(()=>[s(m,{modelValue:u.step,"onUpdate:modelValue":e[7]||(e[7]=l=>u.step=l),placeholder:o(t)("common.inputText"),type:"number",disabled:v.value},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(a,{label:o(t)("device.unit"),prop:"unit"},{default:d(()=>[s(n,{modelValue:u.unit,"onUpdate:modelValue":e[8]||(e[8]=l=>u.unit=l),placeholder:o(t)("common.inputText"),disabled:v.value,filterable:"",clearable:""},{default:d(()=>[(i(!0),y(k,null,N(L.value,l=>(i(),f(r,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"])])):g("",!0),u.type_spec==="bool"?(i(),y("div",je,[b("label",Ie,V(o(t)("device.booleanValue")),1),s(a,{label:"true",prop:"true_value"},{default:d(()=>[s(m,{modelValue:u.true_value,"onUpdate:modelValue":e[9]||(e[9]=l=>u.true_value=l),disabled:v.value,placeholder:o(t)("device.paramRule")},null,8,["modelValue","disabled","placeholder"])]),_:1}),s(a,{label:"false",prop:"false_value"},{default:d(()=>[s(m,{modelValue:u.false_value,"onUpdate:modelValue":e[10]||(e[10]=l=>u.false_value=l),disabled:v.value,placeholder:o(t)("device.paramRule")},null,8,["modelValue","disabled","placeholder"])]),_:1})])):g("",!0),u.type_spec==="enum"?(i(),y("div",$e,[s(oe,{ref_key:"enuminput",ref:P,modelValue:u.specs,"onUpdate:modelValue":e[11]||(e[11]=l=>u.specs=l),label:o(t)("device.attributeEnumItems"),"max-items":100},null,8,["modelValue","label"])])):g("",!0),u.type_spec==="text"?(i(),f(a,{key:3,label:o(t)("device.dataLength"),prop:"length"},{default:d(()=>[s(m,{modelValue:u.length,"onUpdate:modelValue":e[12]||(e[12]=l=>u.length=l),placeholder:o(t)("common.inputText"),type:"number",disabled:v.value},{append:d(()=>[U(V(o(t)("device.character")),1)]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"])):g("",!0),s(a,{label:o(t)("device.readWriteType"),prop:"read_write"},{default:d(()=>[s(n,{modelValue:u.read_write,"onUpdate:modelValue":e[13]||(e[13]=l=>u.read_write=l),onChange:e[14]||(e[14]=l=>j("readWriteType")),placeholder:o(t)("common.inputText"),disabled:v.value},{default:d(()=>[(i(!0),y(k,null,N(o(de),l=>(i(),f(r,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"])])):g("",!0),u.typeValue==="event"?(i(),y("div",Ae,[s(a,{label:o(t)("device.eventType"),prop:"envent_type"},{default:d(()=>[s(n,{modelValue:u.envent_type,"onUpdate:modelValue":e[15]||(e[15]=l=>u.envent_type=l),onChange:e[16]||(e[16]=l=>j("envent_type")),disabled:v.value},{default:d(()=>[(i(!0),y(k,null,N(o(ie),l=>(i(),f(r,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1},8,["label"]),b("div",null,[b("label",Ee,[U(V(o(t)("device.outputParameters"))+" ",1),b("p",Be,V(o(t)("device.maxFiftyParameters")),1)]),u.outputParams.length>0?(i(),f(o(K),{key:0,columns:ee,data:u.outputParams},null,8,["data"])):g("",!0),s(a,null,{default:d(()=>[b("div",{class:"add-event-btn",onClick:e[17]||(e[17]=l=>W("output"))},[s(T,null,{default:d(()=>[s(o(D))]),_:1}),b("p",null,V(o(t)("device.addParameter")),1)])]),_:1})])])):g("",!0),u.typeValue==="serve"?(i(),y("div",Je,[s(a,{label:o(t)("device.callMethod"),prop:"callMethod"},{default:d(()=>[s(n,{modelValue:u.callMethod,"onUpdate:modelValue":e[18]||(e[18]=l=>u.callMethod=l),onChange:e[19]||(e[19]=l=>j("callMethod")),placeholder:o(t)("common.selectText"),disabled:v.value},{default:d(()=>[(i(!0),y(k,null,N(o(ce),l=>(i(),f(r,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),b("div",null,[e[37]||(e[37]=b("label",{class:"el-form-item__label label"},[U("输入参数 "),b("p",{style:{"margin-left":"10px",color:"rgba(0, 0, 0, 0.45)","font-size":"12px"}},"最多支持50个参数")],-1)),u.inputParams.length>0?(i(),f(o(K),{key:0,columns:Ve,data:u.inputParams},null,8,["data"])):g("",!0),s(a,null,{default:d(()=>[b("div",{class:"add-event-btn",onClick:e[20]||(e[20]=l=>W("input"))},[s(T,null,{default:d(()=>[s(o(D))]),_:1}),b("p",null,V(o(t)("device.addParam")),1)])]),_:1})]),b("div",null,[b("label",ze,[U(V(o(t)("device.outputParameters"))+" ",1),b("p",Le,V(o(t)("device.maxFiftyParameters")),1)]),u.outputParams.length>0?(i(),f(o(K),{key:0,columns:ee,data:u.outputParams},null,8,["data"])):g("",!0),s(a,null,{default:d(()=>[b("div",{class:"add-event-btn",onClick:e[21]||(e[21]=l=>W("output"))},[s(T,null,{default:d(()=>[s(o(D))]),_:1}),b("p",null,V(o(t)("device.addParam")),1)])]),_:1})])])):g("",!0),s(a,{label:o(t)("device.modelTag")},{default:d(()=>[s(x,{modelValue:u.type,"onUpdate:modelValue":e[22]||(e[22]=l=>u.type=l),"fetch-suggestions":Pe,placeholder:o(t)("device.modelTagDesc"),onSelect:Ne,debounce:500,disabled:v.value},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(a,{label:o(t)("device.description")},{default:d(()=>[s(m,{disabled:v.value,modelValue:u.description,"onUpdate:modelValue":e[23]||(e[23]=l=>u.description=l),rows:4,type:"textarea",placeholder:o(t)("common.inputText")},null,8,["disabled","modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"]),(i(),f(Y,{modelValue:O.value,"onUpdate:modelValue":e[36]||(e[36]=l=>O.value=l),title:I.value,size:"30%",key:X.value},{footer:d(()=>[b("div",null,[s(o(M),{type:"primary",loading:ne.value,onClick:ge},{default:d(()=>[U(V(o(t)("common.ok")),1)]),_:1},8,["loading"]),s(o(M),{onClick:e[35]||(e[35]=l=>O.value=!1)},{default:d(()=>[U(V(o(t)("common.cancel")),1)]),_:1})])]),default:d(()=>[s(h,{model:c,rules:o(ve),ref_key:"paramFormRef",ref:J,"label-position":"top"},{default:d(()=>[s(a,{label:o(t)("device.parameterName"),prop:"name"},{default:d(()=>[s(m,{modelValue:c.name,"onUpdate:modelValue":e[24]||(e[24]=l=>c.name=l),placeholder:o(t)("common.inputText"),disabled:v.value},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(a,{label:o(t)("device.identifier"),prop:"code"},{default:d(()=>[s(m,{modelValue:c.code,"onUpdate:modelValue":e[25]||(e[25]=l=>c.code=l),placeholder:o(t)("common.inputText"),disabled:v.value},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(a,{label:o(t)("device.dataType"),prop:"type_spec"},{default:d(()=>[s(n,{modelValue:c.type_spec,"onUpdate:modelValue":e[26]||(e[26]=l=>c.type_spec=l),onChange:xe,placeholder:o(t)("common.selectText"),disabled:v.value},{default:d(()=>[(i(!0),y(k,null,N(o(Z),l=>(i(),f(r,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),ye.value?(i(),y("div",We,[b("div",Ye,[b("label",De,V(o(t)("device.valueRange")),1),b("div",Ke,[s(a,{prop:"min",style:{"margin-bottom":"0"}},{default:d(()=>[s(m,{type:"number",modelValue:c.min,"onUpdate:modelValue":e[27]||(e[27]=l=>c.min=l),placeholder:o(t)("device.minValue"),disabled:v.value},null,8,["modelValue","placeholder","disabled"])]),_:1}),e[38]||(e[38]=b("span",{class:"range-separator"},"-",-1)),s(a,{prop:"max",style:{"margin-bottom":"0"}},{default:d(()=>[s(m,{type:"number",modelValue:c.max,"onUpdate:modelValue":e[28]||(e[28]=l=>c.max=l),placeholder:o(t)("device.maxValue"),disabled:v.value},null,8,["modelValue","placeholder","disabled"])]),_:1})])]),s(a,{label:o(t)("device.step"),prop:"step"},{default:d(()=>[s(m,{modelValue:c.step,"onUpdate:modelValue":e[29]||(e[29]=l=>c.step=l),placeholder:o(t)("common.inputText"),type:"number",disabled:v.value},null,8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(a,{label:o(t)("device.unit"),prop:"unit"},{default:d(()=>[s(n,{modelValue:c.unit,"onUpdate:modelValue":e[30]||(e[30]=l=>c.unit=l),placeholder:o(t)("common.inputText"),disabled:v.value,filterable:"",clearable:""},{default:d(()=>[(i(!0),y(k,null,N(L.value,l=>(i(),f(r,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"])])):g("",!0),c.type_spec==="bool"?(i(),y("div",Ge,[b("label",He,V(o(t)("device.booleanValue")),1),s(a,{label:"true",prop:"true_value"},{default:d(()=>[s(m,{disabled:v.value,modelValue:c.true_value,"onUpdate:modelValue":e[31]||(e[31]=l=>c.true_value=l),placeholder:o(t)("device.paramRule")},null,8,["disabled","modelValue","placeholder"])]),_:1}),s(a,{label:"false",prop:"false_value"},{default:d(()=>[s(m,{disabled:v.value,modelValue:c.false_value,"onUpdate:modelValue":e[32]||(e[32]=l=>c.false_value=l),placeholder:o(t)("device.paramRule")},null,8,["disabled","modelValue","placeholder"])]),_:1})])):g("",!0),c.type_spec==="text"?(i(),f(a,{key:2,label:o(t)("device.dataLength"),prop:"length"},{default:d(()=>[s(m,{modelValue:c.length,"onUpdate:modelValue":e[33]||(e[33]=l=>c.length=l),placeholder:o(t)("common.inputText"),type:"number",disabled:v.value},{append:d(()=>[U(V(o(t)("device.character")),1)]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"])):g("",!0),c.type_spec==="enum"?(i(),y("div",Qe,[(i(),f(oe,{ref_key:"enuminput",ref:P,key:"param-enum-"+F.value+"-"+C.value,modelValue:c.specs,"onUpdate:modelValue":e[34]||(e[34]=l=>c.specs=l),label:E.value,"max-items":50},null,8,["modelValue","label"]))])):g("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]))],64)}}}),bl=Se(Xe,[["__scopeId","data-v-6e50c504"]]);export{bl as default};
