import{_ as N}from"./index-CAdyeJt3.js";import{c as p,y as o,z as c,A as e,M as n,K as f,O as b,a4 as M,C as D}from"./vue-chunks-C1K3ngR7.js";import"./element-plus--V1NSjC4.js";const B={class:"calendar-display"},E={key:0,class:"month-view calendar-content"},q={class:"header"},O={key:0,class:"statistics"},V={class:"stat-item"},j={class:"value"},z={class:"unit"},I={class:"stat-item"},P={class:"value"},A={class:"unit"},K={class:"stat-item"},L={class:"value"},G={class:"unit"},H={class:"month-grid"},J=["onClick"],Q={class:"day-number"},R={key:0,class:"data-value"},T={key:1,class:"no-data"},U={key:1,class:"year-view calendar-content"},W={class:"header"},X={key:0,class:"statistics"},Y={class:"stat-item"},Z={class:"value"},tt={class:"unit"},at={class:"stat-item"},et={class:"value"},st={class:"unit"},nt={class:"stat-item"},it={class:"value"},lt={class:"unit"},ot={class:"year-grid"},ct=["onClick"],ut={class:"month-name"},dt={key:0,class:"data-value"},rt={key:1,class:"no-data"},mt={__name:"CalendarDisplay",props:{view:{type:String,required:!0,validator:l=>["month","year"].includes(l)},year:{type:Number,required:!0},month:{type:Number,required:!0},unit:{type:String,default:""},dayData:{type:Object,default:()=>({})},monthData:{type:Object,default:()=>({})},showStatistics:{type:Boolean,default:!0},showExtremes:{type:Boolean,default:!0},formatFunction:{type:Function,default:null},decimalPlaces:{type:Number,default:2}},emits:["day-click","month-click"],setup(l,{emit:S}){const i=l,g=S,k=p(()=>new Date(i.year,i.month,0).getDate()),m=p(()=>{const a=[];for(let u=1;u<=k.value;u++){const d=h(u);d&&d.value!==void 0&&a.push(d.value)}if(a.length===0)return{max:0,min:0,avg:0};const t=Math.max(...a),s=Math.min(...a),x=a.reduce((u,d)=>u+d,0)/a.length;return{max:t,min:s,avg:x}}),v=p(()=>{const a=[];for(let u=1;u<=12;u++){const d=y(u);d&&d.value!==void 0&&a.push(d.value)}if(a.length===0)return{max:0,min:0,avg:0};const t=Math.max(...a),s=Math.min(...a),x=a.reduce((u,d)=>u+d,0)/a.length;return{max:t,min:s,avg:x}}),h=a=>{const t=`${i.year}-${String(i.month).padStart(2,"0")}-${String(a).padStart(2,"0")}`;return i.dayData[t]||i.dayData[a]||null},y=a=>{const t=`${i.year}-${String(a).padStart(2,"0")}`;return i.monthData[t]||i.monthData[a]||null},r=a=>a==null?"--":i.formatFunction&&typeof i.formatFunction=="function"?i.formatFunction(a):Number.isFinite(a)?a.toFixed(i.decimalPlaces):a,C=a=>{if(!i.showExtremes)return"";const t=h(a);if(!t||t.value===void 0)return"";if(t.isMax!==void 0&&t.isMax)return"max-value";if(t.isMin!==void 0&&t.isMin)return"min-value";const s=t.value;return s===m.value.max?"max-value":s===m.value.min?"min-value":""},w=a=>{if(!i.showExtremes)return"";const t=y(a);if(!t||t.value===void 0)return"";if(t.isMax!==void 0&&t.isMax)return"max-value";if(t.isMin!==void 0&&t.isMin)return"min-value";const s=t.value;return s===v.value.max?"max-value":s===v.value.min?"min-value":""},F=a=>{const t=h(a);g("day-click",{year:i.year,month:i.month,day:a,data:t})},$=a=>{const t=y(a);g("month-click",{year:i.year,month:a,data:t})};return(a,t)=>(o(),c("div",B,[l.view==="month"?(o(),c("div",E,[e("div",q,[e("span",null,n(l.year)+"年"+n(l.month)+"月",1),l.showStatistics?(o(),c("div",O,[e("div",V,[t[0]||(t[0]=e("span",{class:"label max-label"},"最大:",-1)),e("span",j,n(r(m.value.max)),1),e("span",z,n(l.unit),1)]),e("div",I,[t[1]||(t[1]=e("span",{class:"label min-label"},"最小:",-1)),e("span",P,n(r(m.value.min)),1),e("span",A,n(l.unit),1)]),e("div",K,[t[2]||(t[2]=e("span",{class:"label"},"平均:",-1)),e("span",L,n(r(m.value.avg)),1),e("span",G,n(l.unit),1)])])):f("",!0)]),e("div",H,[(o(!0),c(b,null,M(k.value,s=>(o(),c("div",{key:s,class:D(["day-item",C(s)]),onClick:_=>F(s)},[e("div",Q,n(s),1),h(s)?(o(),c("div",R,n(r(h(s).value)),1)):(o(),c("div",T,"--"))],10,J))),128))])])):f("",!0),l.view==="year"?(o(),c("div",U,[e("div",W,[e("span",null,n(l.year)+"年",1),l.showStatistics?(o(),c("div",X,[e("div",Y,[t[3]||(t[3]=e("span",{class:"label max-label"},"最大:",-1)),e("span",Z,n(r(v.value.max)),1),e("span",tt,n(l.unit),1)]),e("div",at,[t[4]||(t[4]=e("span",{class:"label min-label"},"最小:",-1)),e("span",et,n(r(v.value.min)),1),e("span",st,n(l.unit),1)]),e("div",nt,[t[5]||(t[5]=e("span",{class:"label"},"平均:",-1)),e("span",it,n(r(v.value.avg)),1),e("span",lt,n(l.unit),1)])])):f("",!0)]),e("div",ot,[(o(),c(b,null,M(12,s=>e("div",{key:s,class:D(["month-item",w(s)]),onClick:_=>$(s)},[e("div",ut,n(s)+"月",1),y(s)?(o(),c("div",dt,n(r(y(s).value)),1)):(o(),c("div",rt,"--"))],10,ct)),64))])])):f("",!0)]))}},ft=N(mt,[["__scopeId","data-v-4dd07256"]]);export{ft as default};
