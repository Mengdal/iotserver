import{j as _}from"./index-CYuSvVul.js";import{x as v,aH as S,c as z,r as p,ag as y,y as L,G as w,H,P,u as e,l as u}from"./vue-chunks-C1K3ngR7.js";import{_ as R}from"./Table.vue_vue_type_script_lang-D3v-kC-o.js";import{u as x}from"./useTable-Cg8mTZpf.js";import{d as A}from"./dateUtil-HUUeH7cc.js";import{_ as C}from"./index-CAdyeJt3.js";import"./index-DfycOL0q.js";import"./element-plus--V1NSjC4.js";/* empty css                        *//* empty css                *//* empty css                  *//* empty css               */import"./el-checkbox-group-Cm0j4lwI.js";/* empty css                *//* empty css                         *//* empty css                  *//* empty css                       */const Y=v({__name:"Log",setup(q){const l=S(),m=z(()=>window.innerHeight-170),c=p(!1),n=p({id:JSON.parse(l.params.params).id,type:JSON.parse(l.params.params).type}),{tableRegister:g,tableState:d,tableMethods:D}=x({fetchDataApi:async()=>{const{currentPage:a,pageSize:t}=d,r=await _({page:e(a),size:e(t),id:e(n.value.id),type:e(n.value.type)});return{list:r.data.list,total:r.data.totalRow}}}),{loading:M,dataList:f,total:h,currentPage:s,pageSize:o}=d,b=[{field:"dn",label:"设备名称",search:{hidden:!0}},{field:"name",label:"name",search:{hidden:!0}},{field:"channel",label:"控制方式",search:{hidden:!0}},{field:"seq",label:"seq",search:{hidden:!0}},{field:"sn",label:"sn",search:{hidden:!0}},{field:"status",label:"status",search:{hidden:!0},formatter:a=>a.status!="FAIL"?"成功":"失败"},{field:"tag",label:"tag",search:{hidden:!0}},{field:"val",label:"值",search:{hidden:!0}},{field:"created",label:"下发时间",formatter:a=>A(a.created*1e3).format("YYYY-MM-DD HH:mm:ss"),search:{hidden:!0}}];return(a,t)=>{const r=y("el-card");return L(),w(r,null,{default:H(()=>[P(e(R),{border:!1,pageSize:e(o),"onUpdate:pageSize":t[0]||(t[0]=i=>u(o)?o.value=i:null),size:"small",currentPage:e(s),"onUpdate:currentPage":t[1]||(t[1]=i=>u(s)?s.value=i:null),columns:b,data:e(f),loading:c.value,height:m.value,pagination:{total:e(h),pageSizes:[20,40,50,100,1e3]},onRegister:e(g),showAction:""},null,8,["pageSize","currentPage","data","loading","height","pagination","onRegister"])]),_:1})}}}),X=C(Y,[["__scopeId","data-v-7a8c6041"]]);export{X as default};
