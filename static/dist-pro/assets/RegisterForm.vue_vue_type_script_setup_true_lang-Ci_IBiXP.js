import{F as x}from"./Form-CzZbC4Aj.js";import{i as p,c as F}from"./index-CAdyeJt3.js";import{u as I}from"./useForm-CD85wrwf.js";import{u as R}from"./useValidator-Barz9SCp.js";import{x as j,r as l,X as C,P as r,O as E,y as O,G as V,u as d,aa as q}from"./vue-chunks-C1K3ngR7.js";function m(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!q(t)}const L=j({__name:"RegisterForm",emits:["to-login"],setup(t,{emit:u}){const f=u,{formRegister:g,formMethods:w}=I(),{getFormData:n,getElFormExpose:h}=w,{t:e}=F(),{required:a,check:B}=R();l(60),l(!1);const P=C([{field:"title",colProps:{span:24},formItemProps:{slots:{default:()=>r("h2",{class:"text-2xl font-bold text-center w-[100%]"},[e("login.register")])}}},{field:"username",label:e("login.username"),value:"",component:"Input",colProps:{span:24},componentProps:{placeholder:e("login.usernamePlaceholder")}},{field:"password",label:e("login.password"),value:"",component:"InputPassword",colProps:{span:24},componentProps:{style:{width:"100%"},strength:!0,placeholder:e("login.passwordPlaceholder")}},{field:"check_password",label:e("login.checkPassword"),value:"",component:"InputPassword",colProps:{span:24},componentProps:{style:{width:"100%"},strength:!0,placeholder:e("login.passwordPlaceholder")}},{field:"register",colProps:{span:24},formItemProps:{slots:{default:()=>{let s,o;return r(E,null,[r("div",{class:"w-[100%]"},[r(p,{type:"primary",class:"w-[100%]",loading:i.value,onClick:y},m(s=e("login.register"))?s:{default:()=>[s]})]),r("div",{class:"w-[100%] mt-15px"},[r(p,{class:"w-[100%]",onClick:v},m(o=e("login.hasUser"))?o:{default:()=>[o]})])])}}}}]),_=async(s,o,c)=>{const k=await n();o!==k.password?c(new Error("两次输入的密码不一致!")):c()},b={username:[a()],password:[a()],check_password:[a(),{validator:_,trigger:"blur"}]},v=()=>{f("to-login")},i=l(!1),y=async()=>{const s=await h();await n(),s?.validate(async o=>{o&&(i.value=!1)})};return(s,o)=>(O(),V(d(x),{schema:P,rules:b,"label-position":"top","hide-required-asterisk":"",size:"large",class:"dark:border-1 dark:border-[var(--el-border-color)] dark:border-solid",onRegister:d(g)},null,8,["schema","onRegister"]))}});export{L as _};
