import{d as N,u as G,z as F,r as i,X as R,o as le,a0 as L,V as H,P as T,f as d,n as l,h as k,D,w as a,k as _,l as e,j as r,K as j,i as q,p as C,t as $,bN as se,am as Q,_ as z,g as J,bO as K,ax as V,ay as O,ap as P,an as W,bP as oe,aB as ne,bQ as re,bR as X,bS as Z,F as de,a8 as Y,Q as ee,bT as ue,Z as ie}from"./index-35337fd3.js";import{G as ce}from"./index-a6d36fad.js";import{d as pe,A as me}from"./energy-f0146bb7.js";import{i as B}from"./icon-ebc544b2.js";const ve="/static/jpg/app.jpg",fe={class:"header-item left"},_e={key:0,style:{position:"absolute",left:"1vw"}},ge={class:"header-item center"},we={class:"header-item right"},ye=N({__name:"index",setup(A){const{ArrowUndoIcon:I,NotificationsOutlineIcon:g}=B.ionicons5,s=G(),y=F(),f=i([]);i(0);const h=i(null),x=o=>{let m=f.value.find(t=>t.id===o);s.setProjectDetail(m),window.location.reload()},b=()=>{Q.replace({name:T.BASE_HOME_PROJECT_LIST_NAME})},p=()=>{Q.replace({name:T.WARN_LIST_NAME})},S=()=>{me({projectId:s.projectDetail.id,page:1,size:9999,handler:!1}).then(o=>{o.code==200&&o.data.totalElements&&s.setCheckNum(o.data.totalElements)})};R(()=>s.isMenuChild,(o,m)=>{console.log(o,m,s.isMenuChild),s.projectDetail.id&&!s.isMenuChild?(S(),h.value=setInterval(()=>{S()},3e5)):clearInterval(h.value)}),le(async()=>{L.type!="gateway"&&(f.value=(await pe({page:1,size:9999})).data.tableData)});const u=H(()=>y.fullPath===T.BASE_HOME_ITEMS),U=H(()=>s.projectDetail.id);return(o,m)=>{const t=d("n-select"),n=d("n-form-item"),c=d("n-space"),w=d("n-icon"),E=d("n-button"),M=d("n-popover"),v=d("n-badge"),ae=d("n-layout-header");return l(s).getIsShowMenuAndHeader?(k(),D(ae,{key:0,bordered:"",class:"go-header"},{default:a(()=>[_("header",{class:se(["go-header-box",{"is-project":u.value}])},[_("div",fe,[e(c,null,{default:a(()=>[!l(s).isMenuChild&&l(s)?.userInfo?.roleId<=1?(k(),D(n,{key:0,style:{"margin-top":"3vh"},label:o.$t("energy.project_list"),"label-align":"left","label-placement":"left"},{default:a(()=>[e(t,{style:{width:"200px"},value:U.value,"onUpdate:value":[m[0]||(m[0]=te=>U.value=te),x],placeholder:o.$t("energy.please_select"),options:f.value,"label-field":"name","value-field":"id"},null,8,["value","placeholder","options"])]),_:1},8,["label"])):r("v-if",!0),j(o.$slots,"left",{},void 0,!0)]),_:3}),!l(s).isMenuChild&&l(s)?.userInfo?.roleId<=1?(k(),q("data",_e,[e(M,{trigger:"hover"},{trigger:a(()=>[e(E,{onClick:b,quaternary:""},{icon:a(()=>[e(w,null,{default:a(()=>[e(l(I))]),_:1})]),_:1})]),default:a(()=>[C(" "+$(o.$t("energy.Return_to_project_List")),1)]),_:1})])):r("v-if",!0)]),_("div",ge,[j(o.$slots,"center",{},void 0,!0)]),_("div",we,[e(c,null,{default:a(()=>[j(o.$slots,"ri-left",{},void 0,!0),l(s).getCheckNum!=0?(k(),D(v,{key:0,style:{"margin-top":"5px"},value:l(s).getCheckNum,onClick:p},{default:a(()=>[e(w,{size:"23"},{default:a(()=>[e(l(g))]),_:1})]),_:1},8,["value"])):r("v-if",!0),r(` v-if="env.type == 'gateway'" `),e(l(ce)),r(" <theme-color-select></theme-color-select> "),r(" <go-theme-select></go-theme-select> "),j(o.$slots,"ri-right",{},void 0,!0)]),_:3})])],2)]),_:3})):r("v-if",!0)}}}),he=z(ye,[["__scopeId","data-v-71b426da"],["__file","/Users/cyj/Desktop/work project/Scada-4.21/newScada/src/layout/components/LayoutHeader/index.vue"]]),be={style:{display:"flex","justify-content":"flex-end"}},ke={style:{display:"flex","justify-content":"flex-end"}},je=N({__name:"index",props:{modelShow:Boolean,subUsername:String},emits:["update:modelShow"],setup(A,{emit:I}){const{CloseIcon:g,AddIcon:s}=B.ionicons5,y=A,f=i(!1),h=I,x={username:{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"},password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]},b=i(null),p=i({username:J("USER_NAME"),password:"",role:"1"}),S=i(null),u=i({username:"",password:"",role:"2"}),U=t=>{t.preventDefault(),b.value?.validate(async n=>{if(!n){let c=await X(p.value);c.code==200?(window.$message.success("\u4E3B\u8D26\u53F7\u4FEE\u6539\u6210\u529F,\u8BF7\u91CD\u65B0\u767B\u5F55"),Z()):window.$message.error(c.message)}})},o=t=>{t.preventDefault(),S.value?.validate(async n=>{if(!n){let c=await X(u.value);c.code==200?(window.$message.success("\u5B50\u8D26\u53F7\u4FEE\u6539\u6210\u529F"),f.value=!1,u.value={username:"admin",password:"",role:"2"}):window.$message.error(c.message)}})};R(()=>y.modelShow,t=>{f.value=t}),R(()=>y.subUsername,t=>{u.value.username=t});const m=()=>{h("update:modelShow",!1)};return(t,n)=>{const c=d("n-h3"),w=d("n-space"),E=d("n-icon"),M=d("n-h5");return k(),D(l(re),{show:f.value,"onUpdate:show":n[4]||(n[4]=v=>f.value=v),onAfterLeave:m,"transform-origin":"center"},{default:a(()=>[e(l(ne),{class:"go-system-setting",style:{width:"600px"},bordered:!1,size:"small"},{header:a(()=>[e(w,{justify:"center",align:"center",style:{width:"100%"}},{default:a(()=>[e(c,{class:"go-mb-0",style:{"text-align":"center"}},{default:a(()=>[C($(t.$t("energy.user_list")),1)]),_:1})]),_:1}),e(E,{size:"20",class:"go-cursor-pointer",onClick:m,style:{position:"absolute",right:"16px",top:"16px"}},{default:a(()=>[e(l(g))]),_:1})]),default:a(()=>[e(l(K),{"default-expanded-names":["main"]},{default:a(()=>[e(w,{justify:"space-between",align:"center"},{default:a(()=>[e(M,{class:"go-mb-0"},{default:a(()=>[C($(t.$t("project.main_account_settings")),1)]),_:1})]),_:1}),e(l(V),{ref_key:"formRef",ref:b,model:p.value,rules:x,size:"large"},{default:a(()=>[e(l(O),{path:"username",label:t.$t("energy.Username")},{default:a(()=>[e(l(P),{value:p.value.username,"onUpdate:value":n[0]||(n[0]=v=>p.value.username=v),placeholder:t.$t("project.enter_new_username"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),e(l(O),{path:"password",label:t.$t("project.new_password")},{default:a(()=>[e(l(P),{value:p.value.password,"onUpdate:value":n[1]||(n[1]=v=>p.value.password=v),type:"password",placeholder:t.$t("project.enter_new_password"),"show-password-on":"mousedown",clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),_("div",be,[e(l(W),{type:"primary",onClick:U},{default:a(()=>[C($(t.$t("project.submit_changes")),1)]),_:1})])]),_:1},8,["model"])]),_:1}),e(l(oe)),e(w,{vertical:""},{default:a(()=>[e(w,{justify:"space-between",align:"center"},{default:a(()=>[e(M,{class:"go-mb-0"},{default:a(()=>[C($(t.$t("project.sub_account_settings")),1)]),_:1})]),_:1}),e(l(K),{"default-expanded-names":["main"]},{default:a(()=>[e(l(V),{ref_key:"subFormRef",ref:S,model:u.value,rules:x},{default:a(()=>[e(l(O),{path:"username",label:t.$t("energy.Username")},{default:a(()=>[e(l(P),{value:u.value.username,"onUpdate:value":n[2]||(n[2]=v=>u.value.username=v),placeholder:t.$t("project.enter_new_password"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),e(l(O),{path:"password",label:t.$t("project.new_password")},{default:a(()=>[e(l(P),{type:"password",value:u.value.password,"onUpdate:value":n[3]||(n[3]=v=>u.value.password=v),placeholder:t.$t("project.enter_new_password"),clearable:"","show-password-on":"mousedown"},null,8,["value","placeholder"])]),_:1},8,["label"]),_("div",ke,[e(l(W),{type:"primary",onClick:o},{default:a(()=>[C($(t.$t("project.submit_changes")),1)]),_:1})])]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})]),_:1},8,["show"])}}}),Se=z(je,[["__scopeId","data-v-633740ce"],["__file","/Users/cyj/Desktop/work project/Scada-4.21/newScada/src/components/GoSystemSet/index.vue"]]),$e={class:"nameStyle"},Ie=N({__name:"index",setup(A){const{ChatboxEllipsesIcon:I,PersonIcon:g,LogOutOutlineIcon:s,SettingsSharpIcon:y,ChevronDownOutlineIcon:f}=B.ionicons5,h=G(),x=i(!1),b=i(!1);i(!1);const p=i([{label:"\u6211\u7684\u4FE1\u606F",key:"info",type:"render",render:()=>{}},{type:"divider",key:"d1"},{label:Y("global.user_list"),key:"sysSet",icon:ee(y)},{label:Y("global.logout"),key:"logout",icon:ee(s)}]),S=H(()=>L.type=="gateway"?p.value.filter(t=>t.key==="logout"||t.key==="sysSet"):p.value.filter(t=>t.key==="logout")),u=i(""),U=async()=>{let t=await ue();t.code==200?u.value=t.data.username:window.$message.error(t.message),b.value=!0},o=()=>{x.value=!0},m=t=>{switch(t){case"contact":o();break;case"sysSet":U();break;case"logout":h.logout(),Z();break}};return(t,n)=>{const c=d("n-icon"),w=d("n-dropdown");return k(),q(de,null,[e(w,{trigger:"hover",onSelect:m,"show-arrow":!0,options:S.value},{default:a(()=>[_("div",null,[_("span",$e,$(l(h)?.userInfo?.username?l(h)?.userInfo?.username:l(J)("USER_NAME")),1),e(c,null,{default:a(()=>[e(l(f))]),_:1}),r(' <person-icon v-if="fallback"></person-icon> '),r(` <n-avatar v-if="!fallback"
                round
                object-fit="cover"
                size="medium"
                ></n-avatar> `)])]),_:1},8,["options"]),r(" \u7CFB\u7EDF\u8BBE\u7F6E model "),e(l(Se),{modelShow:b.value,"onUpdate:modelShow":n[0]||(n[0]=E=>b.value=E),subUsername:u.value},null,8,["modelShow","subUsername"]),r(" \u5173\u4E8E\u8F6F\u4EF6 model "),r(' <go-system-info v-model:modelShow="modelShowInfo"></go-system-info> ')],64)}}}),xe=z(Ie,[["__scopeId","data-v-9288b960"],["__file","/Users/cyj/Desktop/work project/Scada-4.21/newScada/src/components/GoUserInfo/index.vue"]]),Ue={key:0,class:"hover-container"},Ce=N({__name:"index",setup(A){let I=F().name=="Project-Home"?L.type!="gateway":!0;return(g,s)=>{const y=d("n-button");return l(I)?(k(),D(l(he),{key:0},{left:a(()=>[r(" <n-button></n-button> "),r(' <project-layout-create :collapsed="false"></project-layout-create> '),j(g.$slots,"left",{},void 0,!0)]),center:a(()=>[j(g.$slots,"center",{},void 0,!0)]),"ri-left":a(()=>[j(g.$slots,"ri-left",{},void 0,!0)]),"ri-right":a(()=>[l(L).type=="things"?(k(),q("div",Ue,[e(y,{quaternary:"",class:"btn"},{default:a(()=>s[0]||(s[0]=[_("h3",null,"App",-1)])),_:1}),r(" \u60AC\u6D6E\u56FE\u7247 "),e(ie,{name:"fade"},{default:a(()=>s[1]||(s[1]=[_("img",{class:"hover-image",src:ve,alt:"hover image"},null,-1)])),_:1})])):r("v-if",!0),e(l(xe)),j(g.$slots,"ri-right",{},void 0,!0)]),_:3})):r("v-if",!0)}}}),Ee=z(Ce,[["__scopeId","data-v-08dc8482"],["__file","/Users/cyj/Desktop/work project/Scada-4.21/newScada/src/layout/components/LayoutHeaderPro/index.vue"]]);export{Ee as L};
