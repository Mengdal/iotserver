import{eH as Ie,eI as I,eJ as Te,eK as je,I as Oe,G as Pe,eL as Re,eM as Ae,eN as Ke,eO as Se,d as Le,r as Ue,V as Be,X as Ge,aH as He,f as C,h as d,i as h,k as p,j as _,F as Fe,a9 as Me,l as c,n as f,w as u,p as T,t as D,D as j,bU as g,bN as Ve,cG as Je,eP as Ne,ep as Xe,_ as Ye,__tla as $e}from"./index-35337fd3.js";import{M as qe}from"./index-1a96192d.js";import{C as ze,__tla as Qe}from"./index-8fe60c51.js";import{u as We,G as Ze,h as et,k,f as O,d as P,av as R,e as tt,g as at,__tla as st}from"./chartEditStore-a8bbc3da.js";import{u as lt,a as A,__tla as nt}from"./chartLayoutStore-6d3b55f0.js";import{a as ot,b as rt,l as it,g as ct,D as dt}from"./plugin-11a308bb.js";import{i as ut}from"./icon-ebc544b2.js";import"./index-f68e7159.js";let K,ft=Promise.all([(()=>{try{return $e}catch{}})(),(()=>{try{return Qe}catch{}})(),(()=>{try{return st}catch{}})(),(()=>{try{return nt}catch{}})()]).then(async()=>{function S(a){var t=a==null?0:a.length;return t?a[t-1]:void 0}var L=S;function U(a,t,s){var r=-1,o=a.length;t<0&&(t=-t>o?0:o+t),s=s>o?o:s,s<0&&(s+=o),o=t>s?0:s-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=a[r+t];return i}var B=U,G=Ie,H=B;function F(a,t){return t.length<2?a:G(a,H(t,0,-1))}var M=F,V=I,J=L,N=M,X=Te;function Y(a,t){return t=V(t,a),a=N(a,t),a==null||delete a[X(J(t))]}var $=Y,q=je;function z(a){return q(a)?void 0:a}var Q=z,W=Pe,Z=Se,ee=$,te=I,ae=Re,se=Q,le=Ae,ne=Ke,oe=1,re=2,ie=4,ce=le(function(a,t){var s={};if(a==null)return s;var r=!1;t=W(t,function(i){return i=te(i,a),r||(r=i.length>1),i}),ae(a,ne(a),s),r&&(s=Z(s,oe|re|ie,se));for(var o=t.length;o--;)ee(s,t[o]);return s}),de=ce;const ue=Oe(de),fe={class:"go-content-charts-item-animation-patch"},ge=["onDragstart","onDragend","onDblclick","onClick"],me={class:"list-header"},he={class:"list-center go-flex-center go-transition",draggable:"true"},pe={class:"list-bottom"},_e={key:0,class:"list-model"},ve=["onClick"],be=Le({__name:"index",props:{menuOptions:{type:Array,default:()=>[]}},emits:["deletePhoto"],setup(a,{emit:t}){const s=We(),{TrashIcon:r}=ut.ionicons5,o=t,i=lt(),E=Ue(),ye=e=>!e.disabled&&e.package===Je.PHOTOS&&e.category===et.PRIVATE,w=Be(()=>i.getChartType),Ce=(e,l)=>{l.disabled||(k(l.chartKey,O(l)),k(l.conKey,P(l)),e.dataTransfer.setData(Ne.DRAG_KEY,Xe(ue(l,["image"]))),s.setEditCanvas(R.IS_CREATE,!0))},ke=()=>{s.setEditCanvas(R.IS_CREATE,!1)},xe=async e=>{if(!e.disabled)try{ot(),k(e.chartKey,O(e)),k(e.conKey,P(e));let l=await tt(e);e.redirectComponent&&(e.dataset&&(l.option.dataset=e.dataset),l.chartConfig.title=e.title,l.chartConfig.chartFrame=e.chartFrame),s.addComponentList(l,!1,!0),console.log("====\u9009\u4E2D"),s.setTargetSelectChart(l.id),rt()}catch(l){console.log("error",l),it(),window.$message.warning(g.global.t("project.chartUnderDevelopment"))}},De=e=>{e?.configEvents?.addHandle(e)},Ee=(e,l)=>{ct({type:dt.ERROR,message:g.global.t("project.confirmDeleteImage"),positiveText:g.global.t("project.sure"),negativeText:g.global.t("project.cancel"),title:g.global.t("project.confirm"),transformOrigin:"center",onPositiveCallback:()=>{const v=at();o("deletePhoto",e,l);const b=e.dataset,x=/[?&]id=(\d+)/,y=b.match(x),n=y?y[1]:null;v.deletePhotos(e,n)}})};return Ge(()=>w.value,e=>{e===A.DOUBLE&&He(()=>{E.value.classList.add("miniAnimation")})}),(e,l)=>{const v=C("n-ellipsis"),b=C("n-text"),x=C("n-icon"),y=C("n-button");return d(),h("div",fe,[p("div",{ref_key:"contentChartsItemBoxRef",ref:E,class:Ve(["go-content-charts-item-box",[w.value===f(A).DOUBLE?"double":"single"]])},[_(" \u6BCF\u4E00\u9879\u7EC4\u4EF6\u7684\u6E32\u67D3 "),(d(!0),h(Fe,null,Me(a.menuOptions,(n,we)=>(d(),h("div",{class:"item-box",key:n.title,draggable:"",onDragstart:m=>!n.disabled&&Ce(m,n),onDragend:m=>!n.disabled&&ke(),onDblclick:m=>xe(n),onClick:m=>De(n)},[p("div",me,[c(f(qe),{class:"list-header-control-btn",mini:!0,disabled:!0}),c(b,{class:"list-header-text",depth:"3"},{default:u(()=>[c(v,null,{default:u(()=>[T(D(n.title),1)]),_:2},1024)]),_:2},1024)]),p("div",he,[n.icon?(d(),j(f(Ze),{key:0,class:"list-img",icon:n.icon,color:"#999",width:"48",style:{height:"auto"}},null,8,["icon"])):(d(),j(f(ze),{key:1,class:"list-img",chartConfig:n},null,8,["chartConfig"]))]),p("div",pe,[c(b,{class:"list-bottom-text",depth:"3"},{default:u(()=>[c(v,{style:{"max-width":"90%"}},{default:u(()=>[T(D(n.title),1)]),_:2},1024)]),_:2},1024)]),_(" \u906E\u7F69 "),n.disabled?(d(),h("div",_e)):_("v-if",!0),_(" \u5DE5\u5177\u680F "),ye(n)?(d(),h("div",{key:1,class:"list-tools go-transition",onClick:m=>Ee(n,we)},[c(y,{text:"",type:"default",color:"#ffffff"},{icon:u(()=>[c(x,null,{default:u(()=>[c(f(r))]),_:1})]),default:u(()=>[p("span",null,D(f(g).global.t("project.delete")),1)]),_:1})],8,ve)):_("v-if",!0)],40,ge))),128))],2)])}}});K=Ye(be,[["__scopeId","data-v-fc7b8bf6"],["__file","/Users/cyj/Desktop/work project/Scada-4.21/newScada/src/views/chart/ContentCharts/components/ChartsItemBox/index.vue"]])});export{ft as __tla,K as default};
