import{ac as v,cj as _,cA as f,cB as N,__tla as B}from"./index-35337fd3.js";import{u as S,a as F,C as u,f as I,d as A,e as G,P as U,__tla as P}from"./chartEditStore-a8bbc3da.js";import{u as k,C as O,__tla as R}from"./chartLayoutStore-6d3b55f0.js";let L,D=Promise.all([(()=>{try{return B}catch{}})(),(()=>{try{return P}catch{}})(),(()=>{try{return R}catch{}})()]).then(async()=>{let E,l,r,p;E=a=>a,l=(a,n)=>{try{if(n.id){const i="vnodeBeforeMount"in n.events,o="vnodeMounted"in n.events;return i&&(a.events.advancedEvents.vnodeBeforeMount=n?.events.vnodeBeforeMount),o&&(a.events.advancedEvents.vnodeMounted=n?.events.vnodeMounted),(i||o)&&(n.events={action:[],baseEvent:{[f.ON_CLICK]:void 0,[f.ON_DBL_CLICK]:void 0,[f.ON_MOUSE_ENTER]:void 0,[f.ON_MOUSE_LEAVE]:void 0},advancedEvents:{[N.VNODE_MOUNTED]:void 0,[N.VNODE_BEFORE_MOUNT]:void 0},interactEvents:[]}),a}}catch{return a}},r=(a,n,i=!1)=>{if(l(a,n),i)return _(a,n);const o=n.option;if(!o)return _(a,n);if(n.option=void 0,o)return{..._(a,n),option:o}},p=a=>new Promise(n=>setTimeout(n,a)),L=()=>{const a=S(),n=F(),i=k();return{updateComponent:async(o,w=!1,C=!1,y=!1)=>{w&&(a.componentList=[],n.clearBackStack(),n.clearForwardStack()),o.editCanvasConfig=E(o.editCanvasConfig),o.componentList.forEach(async t=>{const c=e=>{window.$vue.component(e.chartConfig.chartKey)||(window.$vue.component(e.chartConfig.chartKey,I(e.chartConfig)),window.$vue.component(e.chartConfig.conKey,A(e.chartConfig)))};t.isGroup?t.groupList.forEach(e=>{c(e)}):c(t)});const h=async(t,c)=>{y&&await p(5);let e=await G(t.chartConfig);t.chartConfig.redirectComponent&&(t.chartConfig.dataset&&(e.option.dataset=t.chartConfig.dataset),e.chartConfig.title=t.chartConfig.title,e.chartConfig.chartFrame=t.chartConfig.chartFrame),c?c(C?r(e,{...t,id:v()}):r(e,t)):C?a.addComponentList(r(e,{...t,id:v()}),!1,!0):a.addComponentList(r(e,t),!1,!0)};for(const t in o)if(console.log("\u8D4B\u503C"),t===u.COMPONENT_LIST){let c=0;const e=o[t].length;for(const d of o[t]){let m=parseInt((parseFloat(`${++c/e}`)*100).toString());if(i.setItemUnHandle(O.PERCENTAGE,m),d.isGroup){let s=new U;C?s=r(s,{...d,id:v()}):s=r(s,d);const g=[];for(const M of d.groupList)await h(M,T=>{g.push(T)});s.groupList=g,a.addComponentList(s,!1,!0)}else await h(d);m===100&&(n.clearBackStack(),n.clearForwardStack())}}else(t===u.EDIT_CANVAS_CONFIG||t===u.REQUEST_GLOBAL_CONFIG)&&r(a[t],o[t],!0);i.setItemUnHandle(O.PERCENTAGE,0)}}}});export{D as __tla,L as u};
