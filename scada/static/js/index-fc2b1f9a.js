import{d as q,ae as I,u as A,r as o,ak as B,o as J,f as n,h as r,i as R,l as t,w as l,af as m,D as v,p as y,n as x,an as s,j as E,O as g,_ as F}from"./index-35337fd3.js";import{w as G,x as H,y as K,z as M}from"./energy-f0146bb7.js";const Q=q({__name:"index",setup(Y){const _=I("permission"),h=A(),w=o([]),b=o({projectId:h.projectDetail.id}),z=B(),u=o("add"),i=o(!1),d=o({name:"",parentId:"",projectId:h.projectDetail.id}),C=()=>{u.value==="add"?G({...d.value}).then(a=>{a.code==200&&(i.value=!1,window.$message.success("\u6DFB\u52A0\u6210\u529F"),p())}):u.value==="edit"&&H(d.value).then(a=>{a.code==200&&(i.value=!1,window.$message.success("\u7F16\u8F91\u6210\u529F"),p())})},k=(a,e)=>{i.value=!0,u.value=a,d.value={name:"",parentId:"",projectId:h.projectDetail.id}},D=a=>[m(g(s,{strong:!0,text:!0,type:"primary",size:"small",style:{},onClick:()=>{k("add"),d.value.parentId=a.option.id}},{default:()=>"\u6DFB\u52A0"}),[[_,["\u4F4D\u7F6E\u7BA1\u7406","add"]]]),m(g(s,{strong:!0,text:!0,type:"primary",size:"small",style:{marginLeft:"15px"},onClick:()=>{i.value=!0,u.value="edit",d.value.name=a.option.name,d.value.id=a.option.id,d.value.parentId=a.option.parentId}},{default:()=>"\u7F16\u8F91"}),[[_,["\u4F4D\u7F6E\u7BA1\u7406","change"]]]),m(g(s,{quaternary:!0,type:"error",size:"small",style:{marginLeft:"15px"},onClick:()=>{z.error({title:"\u63D0\u793A",showIcon:!1,content:()=>"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",positiveText:"\u786E\u5B9A",positiveButtonProps:{secondary:!0},negativeText:"\u53D6\u6D88",onPositiveClick:()=>{K({id:a.option.id}).then(e=>{e.code==200&&(window.$message.success("\u5220\u9664\u6210\u529F"),p())})}})}},{default:()=>"\u5220\u9664"}),[[_,["\u4F4D\u7F6E\u7BA1\u7406","del"]]])],p=()=>{M(b.value).then(a=>{a.code==200&&JSON.stringify(a.data)!="{}"&&(w.value=[a.data])})};return J(()=>{p()}),(a,e)=>{const c=n("n-space"),$=n("n-tree"),S=n("n-empty"),j=n("n-card"),U=n("n-text"),L=n("n-input"),N=n("n-form-item"),O=n("n-form"),P=n("n-modal"),T=I("permission");return r(),R("div",null,[t(j,null,{header:l(()=>[t(c,null,{default:l(()=>[m((r(),v(x(s),{"attr-type":"button",onClick:e[0]||(e[0]=f=>k("add",{}))},{default:l(()=>e[4]||(e[4]=[y(" \u6DFB\u52A0 ")])),_:1})),[[T,["\u4F4D\u7F6E\u7BA1\u7406","add"]]])]),_:1})]),default:l(()=>[w.value.length!=0?(r(),v($,{key:0,"block-line":"",data:w.value,"key-field":"id","label-field":"name","children-field":"children",selectable:"","render-suffix":D,"default-expand-all":""},null,8,["data"])):(r(),v(S,{key:1,description:a.$t("energy.No_Data_Available")},null,8,["description"]))]),_:1}),i.value?(r(),v(P,{key:0,show:i.value,"onUpdate:show":e[3]||(e[3]=f=>i.value=f)},{default:l(()=>[t(j,{bordered:!1,role:"dialog",size:"small","aria-modal":"true",style:{width:"500px",height:"200px"}},{header:l(()=>[t(c,null,{default:l(()=>[t(U,null,{default:l(()=>e[5]||(e[5]=[y("\u6DFB\u52A0\u4F4D\u7F6E")])),_:1})]),_:1})]),action:l(()=>[t(c,{justify:"flex-end"},{default:l(()=>[t(c,null,{default:l(()=>[t(x(s),{size:"medium",onClick:e[2]||(e[2]=()=>{i.value=!1})},{default:l(()=>e[6]||(e[6]=[y("\u53D6\u6D88")])),_:1}),t(x(s),{size:"medium",type:"primary",onClick:C,secondary:""},{default:l(()=>e[7]||(e[7]=[y("\u4FDD\u5B58")])),_:1})]),_:1})]),_:1})]),default:l(()=>[t(O,{ref:"formRef",inline:"",model:d.value,"label-placement":"left"},{default:l(()=>[t(N,{label:"\u4F4D\u7F6E\u540D\u79F0"},{default:l(()=>[t(L,{value:d.value.name,"onUpdate:value":e[1]||(e[1]=f=>d.value.name=f),placeholder:"\u8BF7\u8F93\u5165"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])):E("v-if",!0)])}}}),V=F(Q,[["__file","/Users/cyj/Desktop/work project/Scada-4.21/newScada/src/views/energy/addr/index.vue"]]);export{V as default};
