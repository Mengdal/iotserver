import{d as V,ae as D,r as g,ak as F,u as G,b as L,al as J,af as v,O as k,am as K,P as Q,an as m,ao as W,ap as z,f as u,h,i as X,l,w as t,n as r,D as x,p as y,t as d,j as Y,_ as Z}from"./index-35337fd3.js";import{d as ee,e as ae,f as te,g as le}from"./energy-f0146bb7.js";const ne=V({__name:"index",setup(oe){const b=D("permission"),C=g(),i=g(!1),_=g({data:[],totalElements:0}),E=g([]),$=g("add"),S=F(),w=g(),q=G();let c=L({name:"",project:""});const s=L({page:1,size:10,name:""});J(()=>{p()});const I=e=>{s.page=e,p()},O=e=>{s.size=e,p()},p=()=>{ee({...s}).then(e=>{E.value=e.data.tableLabel.map(a=>a.key=="button"?{title:a.title,key:"button",render(o){return[v(k(m,{type:"success",quaternary:!0,size:"small",style:{marginLeft:"10px"},onClick:()=>{q.setProjectDetail(o),K.replace({name:Q.HOME_NAME})}},{default:()=>$t("energy.detail")}),[[b,[$t("energy.project_list"),"look"]]]),v(k(m,{type:"success",quaternary:!0,size:"small",style:{marginLeft:"10px"},onClick:()=>{console.log(W(o)),i.value=!0,c.name=o.name,c.projectId=o.id,$.value="edit"}},{default:()=>$t("energy.edit")}),[[b,[$t("energy.project_list"),"change"]]]),v(k(m,{type:"error",size:"small",quaternary:!0,style:{marginLeft:"10px"},onClick:()=>{S.error({title:$t("project.enterPassword"),showIcon:!1,content:()=>[k(z,{value:w.value,clearable:!0,autofocus:!0,onUpdateValue:f=>{w.value=f}})],positiveText:$t("project.sure"),positiveButtonProps:{secondary:!0},negativeText:$t("project.cancel"),onPositiveClick:()=>{ae({projectId:o.id,pwd:w.value}).then(f=>{f.code==200&&(window.$message.success($t("project.deleteSuccess")),p())})},onNegativeClick:()=>{}})}},{default:()=>$t("energy.del")}),[[b,[$t("energy.project_list"),"del"]]])]}}:{title:a.title,key:a.key}),_.value.data=e.data.tableData,_.value.totalElements=e.data.totalElements})},M=e=>{$.value=="add"?te({...c}).then(a=>{a.code==200&&(i.value=!1,window.$message.success("\u6DFB\u52A0\u6210\u529F"),p())}):$.value=="edit"&&le({...c}).then(a=>{a.code==200&&(window.$message.success("\u7F16\u8F91\u6210\u529F"),i.value=!1,p())})},N=()=>{s.page=1,p()},R=e=>{$.value=e,i.value=!0};return(e,a)=>{const o=u("n-form-item"),f=u("n-form"),T=u("n-data-table"),A=u("n-pagination"),j=u("n-space"),U=u("n-card"),B=u("n-text"),H=u("n-modal"),P=D("permission");return h(),X("div",null,[l(U,null,{default:t(()=>[l(f,{ref_key:"formRef",ref:C,inline:"","label-width":100,model:s,"label-placement":"left"},{default:t(()=>[l(o,{label:e.$t("energy.project")+e.$t("energy.name")},{default:t(()=>[l(r(z),{value:s.name,"onUpdate:value":a[0]||(a[0]=n=>s.name=n),placeholder:e.$t("energy.please_enter")},null,8,["value","placeholder"])]),_:1},8,["label"]),l(o,null,{default:t(()=>[v((h(),x(r(m),{"attr-type":"button",onClick:N},{default:t(()=>[y(d(e.$t("energy.search")),1)]),_:1})),[[P,[e.$t("energy.project_list"),"look"]]])]),_:1}),l(o,null,{default:t(()=>[v((h(),x(r(m),{"attr-type":"button",onClick:a[1]||(a[1]=n=>R("add"))},{default:t(()=>[y(d(e.$t("energy.add")),1)]),_:1})),[[P,[e.$t("energy.project_list"),"add"]]])]),_:1})]),_:1},8,["model"]),l(T,{columns:E.value,data:_.value.data,bordered:!1},null,8,["columns","data"]),l(j,{justify:"end",style:{"margin-top":"15px"}},{default:t(()=>[l(A,{page:s.page,"onUpdate:page":[a[2]||(a[2]=n=>s.page=n),I],"page-size":s.size,"onUpdate:pageSize":[a[3]||(a[3]=n=>s.size=n),O],"page-sizes":[10,20,50,100],"item-count":_.value.totalElements,"show-size-picker":"","page-slot":7},{prefix:t(({itemCount:n})=>[y(d(e.$t("project.total"))+" "+d(n)+" "+d(e.$t("project.items")),1)]),_:1},8,["page","page-size","item-count"])]),_:1})]),_:1}),i.value?(h(),x(H,{key:0,show:i.value,"onUpdate:show":a[6]||(a[6]=n=>i.value=n),"mask-closable":!1,closeOnEsc:!1},{default:t(()=>[l(U,{bordered:!1,role:"dialog",size:"small","aria-modal":"true",style:{width:"500px",height:"200px"}},{header:t(()=>[l(j,null,{default:t(()=>[l(B,null,{default:t(()=>[y(d(e.$t("energy.add"))+d(e.$t("energy.project")),1)]),_:1})]),_:1})]),action:t(()=>[l(j,{justify:`
                flex-end`},{default:t(()=>[l(j,null,{default:t(()=>[l(r(m),{size:"medium",onClick:a[5]||(a[5]=()=>{i.value=!1})},{default:t(()=>[y(d(e.$t("energy.close")),1)]),_:1}),l(r(m),{size:"medium",type:"primary",onClick:M,secondary:""},{default:t(()=>[y(d(e.$t("energy.save")),1)]),_:1})]),_:1})]),_:1})]),default:t(()=>[l(f,{ref_key:"formRef",ref:C,inline:"",model:r(c),"label-placement":"left"},{default:t(()=>[l(o,{label:e.$t("energy.project")+e.$t("energy.name")},{default:t(()=>[l(r(z),{value:r(c).name,"onUpdate:value":a[4]||(a[4]=n=>r(c).name=n),placeholder:e.$t("energy.please_enter")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["show"])):Y("v-if",!0)])}}}),se=Z(ne,[["__file","/Users/cyj/Desktop/work project/Scada-4.21/newScada/src/views/energy/project/index.vue"]]);export{se as default};
