import{_ as T,y as $,z as k,A as j,u as x,B as N,r as f,o as R,f as l,h as M,i as q,j as z,l as t,w as o,k as d,t as v,m as U,p as G,n as K,C as L,x as P,S as i,s as n,v as c,q as w,P as E}from"./index-35337fd3.js";import{G as D}from"./index-a6d36fad.js";import"./icon-ebc544b2.js";const I={class:"login-container"},B={style:{"margin-bottom":"30px","font-weight":"600","font-size":"25px"}},H={style:{position:"absolute",top:"2%",right:"2%"}},J={__name:"index",setup(X){const b=$(),p=k(),{locale:S}=j();x();const O=N(),g=f(null),r=f({username:"",password:""}),h={username:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]},m=e=>{e.preventDefault(),g.value?.validate(async s=>{if(s)O.error("\u8BF7\u8F93\u5165\u8D26\u53F7\u5BC6\u7801");else{let a=await L(r.value);if(a.code===200)if(a.data.role===1){P(i.GO_ACCESS_TOKEN_STORE),n(i.GO_ACCESS_TOKEN_STORE,c(a.data.token)),n("PROJECT_DETAIL",c("1")),n("USER_NAME",a.data.username),w(E.BASE_HOME_ITEMS_NAME,!0),window.$message.success("\u767B\u5F55\u6210\u529F");return}else if(a.data.role===2){w(E.PROJECT_HOME_NAME,!0),n(i.GO_ACCESS_TOKEN_STORE,c(a.data.token)),window.$message.success("\u767B\u5F55\u6210\u529F");return}else{window.$message.error(a.message);return}}})};return R(()=>{if(p.query?.language){let e=p.query?.language.toUpperCase();e=="EN"?document.title="Scada Config":document.title="\u7EC4\u6001\u7BA1\u7406",S.value=e,b.changeLang(e)}}),(e,s)=>{const a=l("n-input"),_=l("n-form-item"),C=l("n-button"),y=l("n-form"),A=l("n-card");return M(),q("div",I,[z(` :title="$t('login.form_button')" `),t(A,{class:"login-box",bordered:!1,size:"huge"},{default:o(()=>[s[2]||(s[2]=d("div",{class:"background2"},null,-1)),t(y,{ref_key:"formRef",ref:g,model:r.value,rules:h,size:"large"},{default:o(()=>[d("div",B,v(e.$t("project.welcomeLogin")),1),t(_,{path:"username",label:e.$t("project.account")},{default:o(()=>[t(a,{value:r.value.username,"onUpdate:value":s[0]||(s[0]=u=>r.value.username=u),placeholder:e.$t("project.enterAccount"),clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(_,{path:"password",label:e.$t("project.password")},{default:o(()=>[t(a,{value:r.value.password,"onUpdate:value":s[1]||(s[1]=u=>r.value.password=u),type:"password",onKeyup:U(m,["enter"]),placeholder:e.$t("project.enterPassword"),"show-password-toggle":"",clearable:""},null,8,["value","placeholder"])]),_:1},8,["label"]),t(C,{type:"info",block:"",size:"large",onClick:m},{default:o(()=>[G(v(e.$t("login.form_button")),1)]),_:1})]),_:1},8,["model"])]),_:1}),d("div",H,[t(K(D))])])}}},V=T(J,[["__scopeId","data-v-572ec8bb"],["__file","/Users/cyj/Desktop/work project/Scada-4.21/newScada/src/views/scadaLogin/index.vue"]]);export{V as default};
