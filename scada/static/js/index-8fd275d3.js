import{d as x,L as S,z as O,u as N,r as v,bU as e,f as d,h as I,i as T,k as n,t as u,n as t,l,w as c,m as A,bX as E,p as J,s as m,c as f,v as P,a5 as R,a6 as U,ab as z,S as C,_ as L}from"./index-35337fd3.js";import{ak as q}from"./energy-f0146bb7.js";const D={class:"box"},G={class:"container"},K={class:"text"},F={style:{width:"60px"}},H={style:{width:"60px"}},M={style:{display:"flex","justify-content":"flex-end"}},V=x({__name:"index",setup(B){const{GO_LOGIN_INFO_STORE:y}=C;S();const i=O(),w=N(),o=v(!1),j=v({username:[{required:!0,message:e.global.t("project.enterAccount"),trigger:"blur"}],password:[{required:!0,message:e.global.t("project.enterPassword"),trigger:"blur"}]}),a=v({username:"",password:""});let g=async()=>{try{o.value=!0;let r=await q({...a.value});if(r.code===200){window.$message.success(e.global.t("project.loginSuccess")),m("previewType","share"),m("scadaToken",r.data.token),w.setToken(r.data.token),w.setProjectDetail({id:JSON.parse(f(i.params.id[0])).projectId}),m(y,P(JSON.stringify(r.data))),o.value=!1;const s=R(U.CHART_PREVIEW_NAME,"href");console.log("\u5206\u4EAB\u5916\u8FDE\u63A5",JSON.parse(f(i.params.id[0])).id),z(s,[JSON.parse(f(i.params.id[0])).id],void 0,!1)}else o.value=!1}catch{o.value=!1}};return(r,s)=>{const b=d("n-input"),_=d("n-form-item"),h=d("n-button"),k=d("n-form");return I(),T("div",D,[n("div",G,[n("h3",K,u(t(e).global.t("project.enterAccountPassword")),1),l(k,{ref:"formRef",model:a.value,rules:j.value,"label-placement":"left","label-width":"auto"},{default:c(()=>[l(_,{path:"username"},{default:c(()=>[n("span",F,u(t(e).global.t("project.account")),1),l(b,{value:a.value.username,"onUpdate:value":s[0]||(s[0]=p=>a.value.username=p),size:"small"},null,8,["value"])]),_:1}),l(_,{path:"password"},{default:c(()=>[n("span",H,u(t(e).global.t("project.password")),1),l(b,{value:a.value.password,"onUpdate:value":s[1]||(s[1]=p=>a.value.password=p),type:"password",size:"small",onKeydown:A(E(t(g),["prevent"]),["enter"])},null,8,["value","onKeydown"])]),_:1}),n("div",M,[l(h,{type:"success",loading:o.value,onClick:t(g)},{default:c(()=>[J(u(t(e).global.t("project.login")),1)]),_:1},8,["loading","onClick"])])]),_:1},8,["model","rules"])])])}}}),$=L(V,[["__scopeId","data-v-8dbfcc45"],["__file","/Users/cyj/Desktop/work project/Scada-4.21/newScada/src/views/shareLink/index.vue"]]);export{$ as default};
