import{bA as ze,bB as $e,bC as Ve,bD as We,bE as _e,ba as He,aO as L,bc as ae,bb as Ze,d as qe,be as Ge,r as g,bf as Je,bh as Qe,bj as Xe,aR as U,bi as j,V as u,b7 as Ye,bF as en,bm as nn,b1 as an,bG as tn,bg as te,bp as ln,bk as D,bn as on,O as c,bq as rn,br as sn,bs as dn,bt as un,Z as cn,af as hn,b2 as pn,bH as vn,b3 as gn,b4 as fn,b5 as bn,bI as mn,bu as yn,bz as m,bx as kn,by as wn,aZ as xn,b6 as Cn,bJ as Sn}from"./index-35337fd3.js";function Fn(n){const{popoverColor:h,boxShadow2:r,borderRadius:d,heightMedium:i,dividerColor:f,textColor2:F}=n;return{menuPadding:"4px",menuColor:h,menuBoxShadow:r,menuBorderRadius:d,menuHeight:`calc(${i} * 7.6)`,actionDividerColor:f,actionTextColor:F,actionPadding:"8px 12px"}}const Kn=ze({name:"TreeSelect",common:$e,peers:{Tree:Ve,Empty:We,InternalSelection:_e},self:Fn}),Tn=Kn;function le(n,h){const{rawNode:r}=n;return Object.assign(Object.assign({},r),{label:r[h],value:n.key})}function oe(n,h,r,d){const{rawNode:i}=n;return Object.assign(Object.assign({},i),{value:n.key,label:h.map(f=>f.rawNode[d]).join(r)})}const Pn=He([L("tree-select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 `),L("tree-select-menu",`
 position: relative;
 overflow: hidden;
 margin: 4px 0;
 transition: box-shadow .3s var(--n-bezier), background-color .3s var(--n-bezier);
 border-radius: var(--n-menu-border-radius);
 box-shadow: var(--n-menu-box-shadow);
 background-color: var(--n-menu-color);
 outline: none;
 `,[L("tree","max-height: var(--n-menu-height);"),ae("empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),ae("action",`
 padding: var(--n-action-padding);
 transition: 
 color .3s var(--n-bezier);
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),Ze()])]),On=Object.assign(Object.assign(Object.assign(Object.assign({},te.props),{bordered:{type:Boolean,default:!0},cascade:Boolean,checkable:Boolean,clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},consistentMenuWidth:{type:Boolean,default:!0},defaultShow:Boolean,defaultValue:{type:[String,Number,Array],default:null},disabled:{type:Boolean,default:void 0},filterable:Boolean,checkStrategy:{type:String,default:"all"},loading:Boolean,maxTagCount:[String,Number],multiple:Boolean,showPath:Boolean,separator:{type:String,default:" / "},options:{type:Array,default:()=>[]},placeholder:String,placement:{type:String,default:"bottom-start"},show:{type:Boolean,default:void 0},size:String,value:[String,Number,Array],to:D.propTo,menuProps:Object,virtualScroll:{type:Boolean,default:!0},status:String,renderTag:Function,ellipsisTagPopoverProps:Object}),mn),{renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,watchProps:Array,getChildren:Function,onBlur:Function,onFocus:Function,onLoad:Function,onUpdateShow:[Function,Array],onUpdateValue:[Function,Array],"onUpdate:value":[Function,Array],"onUpdate:show":[Function,Array],leafOnly:Boolean}),An=qe({name:"TreeSelect",props:On,setup(n){Ge(()=>{n.leafOnly&&yn("tree-select",'`leaf-only` is deprecated, please use `check-strategy="child"` instead.')});const h=g(null),r=g(null),d=g(null),i=g(null),{mergedClsPrefixRef:f,namespaceRef:F,inlineThemeDisabled:S}=Je(n),{localeRef:N}=Qe("Select"),{mergedSizeRef:P,mergedDisabledRef:I,mergedStatusRef:re,nTriggerFormBlur:ie,nTriggerFormChange:se,nTriggerFormFocus:de,nTriggerFormInput:ue}=Xe(n),z=g(n.defaultValue),ce=U(n,"value"),y=j(ce,z),$=g(n.defaultShow),he=U(n,"show"),k=j(he,$),K=g(""),pe=u(()=>{const{filter:e}=n;if(e)return e;const{labelField:a}=n;return(l,t)=>l.length?t[a].toLowerCase().includes(l.toLowerCase()):!0}),w=u(()=>Ye(n.options,en(n.keyField,n.childrenField,n.disabledField,void 0))),{value:O}=y,V=g(n.checkable?null:Array.isArray(O)&&O.length?O[O.length-1]:null),A=u(()=>n.multiple&&n.cascade&&n.checkable),W=g(n.defaultExpandAll?void 0:n.defaultExpandedKeys||n.expandedKeys),ve=U(n,"expandedKeys"),ge=j(ve,W),T=g(!1),fe=u(()=>{const{placeholder:e}=n;return e!==void 0?e:N.value.placeholder}),_=u(()=>{const{value:e}=y;return n.multiple?Array.isArray(e)?e:[]:e===null||Array.isArray(e)?[]:[e]}),be=u(()=>n.checkable?[]:_.value),me=u(()=>{const{multiple:e,showPath:a,separator:l,labelField:t}=n;if(e)return null;const{value:o}=y;if(!Array.isArray(o)&&o!==null){const{value:s}=w,v=s.getNode(o);if(v!==null)return a?oe(v,s.getPath(o).treeNodePath,l,t):le(v,t)}return null}),ye=u(()=>{const{multiple:e,showPath:a,separator:l}=n;if(!e)return null;const{value:t}=y;if(Array.isArray(t)){const o=[],{value:s}=w,{checkedKeys:v}=s.getCheckedKeys(t,{checkStrategy:n.checkStrategy,cascade:A.value,allowNotLoaded:n.allowCheckingNotLoaded}),{labelField:p}=n;return v.forEach(ne=>{const M=s.getNode(ne);M!==null&&o.push(a?oe(M,s.getPath(ne).treeNodePath,l,p):le(M,p))}),o}return[]});function B(){var e;(e=r.value)===null||e===void 0||e.focus()}function H(){var e;(e=r.value)===null||e===void 0||e.focusInput()}function Z(e){const{onUpdateShow:a,"onUpdate:show":l}=n;a&&m(a,e),l&&m(l,e),$.value=e}function x(e,a,l){const{onUpdateValue:t,"onUpdate:value":o}=n;t&&m(t,e,a,l),o&&m(o,e,a,l),z.value=e,ue(),se()}function ke(e,a){const{onUpdateIndeterminateKeys:l,"onUpdate:indeterminateKeys":t}=n;l&&m(l,e,a),t&&m(t,e,a)}function we(e,a,l){const{onUpdateExpandedKeys:t,"onUpdate:expandedKeys":o}=n;t&&m(t,e,a,l),o&&m(o,e,a,l),W.value=e}function q(e){const{onFocus:a}=n;a&&a(e),de()}function G(e){b();const{onBlur:a}=n;a&&a(e),ie()}function b(){Z(!1)}function R(){I.value||(K.value="",Z(!0),n.filterable&&H())}function xe(){K.value=""}function Ce(e){var a;k.value&&(!((a=r.value)===null||a===void 0)&&a.$el.contains(kn(e))||b())}function Se(){I.value||(k.value?n.filterable||b():R())}function C(e){const{value:{getNode:a}}=w;return e.map(l=>{var t;return((t=a(l))===null||t===void 0?void 0:t.rawNode)||null})}function Fe(e,a,l){const t=C(e),o=l.action==="check"?"select":"unselect",s=l.node;n.multiple?(x(e,t,{node:s,action:o}),n.filterable&&(H(),n.clearFilterAfterSelect&&(K.value=""))):(e.length?x(e[0],t[0]||null,{node:s,action:o}):x(null,null,{node:s,action:o}),b(),B())}function Ke(e){n.checkable&&ke(e,C(e))}function Te(e){var a;!((a=i.value)===null||a===void 0)&&a.contains(e.relatedTarget)||(T.value=!0,q(e))}function Pe(e){var a;!((a=i.value)===null||a===void 0)&&a.contains(e.relatedTarget)||(T.value=!1,G(e))}function Oe(e){var a,l,t;!((a=i.value)===null||a===void 0)&&a.contains(e.relatedTarget)||!((t=(l=r.value)===null||l===void 0?void 0:l.$el)===null||t===void 0)&&t.contains(e.relatedTarget)||(T.value=!0,q(e))}function Ae(e){var a,l,t;!((a=i.value)===null||a===void 0)&&a.contains(e.relatedTarget)||!((t=(l=r.value)===null||l===void 0?void 0:l.$el)===null||t===void 0)&&t.contains(e.relatedTarget)||(T.value=!1,G(e))}function Be(e){e.stopPropagation();const{multiple:a}=n;!a&&n.filterable&&b(),a?x([],[],{node:null,action:"clear"}):x(null,null,{node:null,action:"clear"})}function Ne(e){const{value:a}=y;if(Array.isArray(a)){const{value:l}=w,{checkedKeys:t}=l.getCheckedKeys(a,{cascade:A.value,allowNotLoaded:n.allowCheckingNotLoaded}),o=t.findIndex(s=>s===e.value);if(~o){const s=t[o],v=C([s])[0];if(n.checkable){const{checkedKeys:p}=l.uncheck(e.value,t,{checkStrategy:n.checkStrategy,cascade:A.value,allowNotLoaded:n.allowCheckingNotLoaded});x(p,C(p),{node:v,action:"delete"})}else{const p=Array.from(t);p.splice(o,1),x(p,C(p),{node:v,action:"delete"})}}}}function Ie(e){const{value:a}=e.target;K.value=a}function J(e){const{value:a}=d;return a?a.handleKeydown(e):{enterBehavior:null}}function Re(e){if(e.key==="Enter"){if(k.value){const{enterBehavior:a}=J(e);if(!n.multiple)switch(a){case"default":case"toggleSelect":b(),B();break}}else R();e.preventDefault()}else e.key==="Escape"?k.value&&(wn(e),b(),B()):k.value?J(e):e.key==="ArrowDown"&&R()}function Ee(){b(),B()}function Me(e){xn(e,"action")||e.preventDefault()}const Le=u(()=>{const{renderTag:e}=n;if(e)return function({option:a,handleClose:l}){const{value:t}=a;if(t!==void 0){const o=w.value.getNode(t);if(o)return e({option:o.rawNode,handleClose:l})}return t}});nn(Sn,{pendingNodeKeyRef:V,dataTreeMate:w});function Q(){var e;k.value&&((e=h.value)===null||e===void 0||e.syncPosition())}an(i,Q);const Ue=tn(n),X=u(()=>{if(n.checkable){const e=y.value;return n.multiple&&Array.isArray(e)?w.value.getCheckedKeys(e,{cascade:n.cascade,checkStrategy:Ue.value,allowNotLoaded:n.allowCheckingNotLoaded}):{checkedKeys:Array.isArray(e)||e===null?[]:[e],indeterminateKeys:[]}}return{checkedKeys:[],indeterminateKeys:[]}}),je={getCheckedData:()=>{const{checkedKeys:e}=X.value;return{keys:e,options:C(e)}},getIndeterminateData:()=>{const{indeterminateKeys:e}=X.value;return{keys:e,options:C(e)}},focus:()=>{var e;return(e=r.value)===null||e===void 0?void 0:e.focus()},focusInput:()=>{var e;return(e=r.value)===null||e===void 0?void 0:e.focusInput()},blur:()=>{var e;return(e=r.value)===null||e===void 0?void 0:e.blur()},blurInput:()=>{var e;return(e=r.value)===null||e===void 0?void 0:e.blurInput()}},E=te("TreeSelect","-tree-select",Pn,Tn,n,f),Y=u(()=>{const{common:{cubicBezierEaseInOut:e},self:{menuBoxShadow:a,menuBorderRadius:l,menuColor:t,menuHeight:o,actionPadding:s,actionDividerColor:v,actionTextColor:p}}=E.value;return{"--n-menu-box-shadow":a,"--n-menu-border-radius":l,"--n-menu-color":t,"--n-menu-height":o,"--n-bezier":e,"--n-action-padding":s,"--n-action-text-color":p,"--n-action-divider-color":v}}),ee=S?ln("tree-select",void 0,Y,n):void 0,De=u(()=>{const{self:{menuPadding:e}}=E.value;return e});return Object.assign(Object.assign({},je),{menuElRef:i,mergedStatus:re,triggerInstRef:r,followerInstRef:h,treeInstRef:d,mergedClsPrefix:f,mergedValue:y,mergedShow:k,namespace:F,adjustedTo:D(n),isMounted:on(),focused:T,menuPadding:De,mergedPlaceholder:fe,mergedExpandedKeys:ge,treeSelectedKeys:be,treeCheckedKeys:_,mergedSize:P,mergedDisabled:I,selectedOption:me,selectedOptions:ye,pattern:K,pendingNodeKey:V,mergedCascade:A,mergedFilter:pe,selectionRenderTag:Le,handleTriggerOrMenuResize:Q,doUpdateExpandedKeys:we,handleMenuLeave:xe,handleTriggerClick:Se,handleMenuClickoutside:Ce,handleUpdateCheckedKeys:Fe,handleUpdateIndeterminateKeys:Ke,handleTriggerFocus:Te,handleTriggerBlur:Pe,handleMenuFocusin:Oe,handleMenuFocusout:Ae,handleClear:Be,handleDeleteOption:Ne,handlePatternInput:Ie,handleKeydown:Re,handleTabOut:Ee,handleMenuMousedown:Me,mergedTheme:E,cssVars:S?void 0:Y,themeClass:ee?.themeClass,onRender:ee?.onRender})},render(){const{mergedTheme:n,mergedClsPrefix:h,$slots:r}=this;return c("div",{class:`${h}-tree-select`},c(rn,null,{default:()=>[c(sn,null,{default:()=>c(dn,{ref:"triggerInstRef",onResize:this.handleTriggerOrMenuResize,status:this.mergedStatus,focused:this.focused,clsPrefix:h,theme:n.peers.InternalSelection,themeOverrides:n.peerOverrides.InternalSelection,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,renderTag:this.selectionRenderTag,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,size:this.mergedSize,bordered:this.bordered,placeholder:this.mergedPlaceholder,disabled:this.mergedDisabled,active:this.mergedShow,loading:this.loading,multiple:this.multiple,maxTagCount:this.maxTagCount,showArrow:!0,filterable:this.filterable,clearable:this.clearable,pattern:this.pattern,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onBlur:this.handleTriggerBlur,onDeleteOption:this.handleDeleteOption,onKeydown:this.handleKeydown},{arrow:()=>{var d,i;return[(i=(d=this.$slots).arrow)===null||i===void 0?void 0:i.call(d)]}})}),c(un,{ref:"followerInstRef",show:this.mergedShow,placement:this.placement,to:this.adjustedTo,teleportDisabled:this.adjustedTo===D.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target"},{default:()=>c(cn,{name:"fade-in-scale-up-transition",appear:this.isMounted,onLeave:this.handleMenuLeave},{default:()=>{var d;if(!this.mergedShow)return null;const{mergedClsPrefix:i,checkable:f,multiple:F,menuProps:S,options:N}=this;return(d=this.onRender)===null||d===void 0||d.call(this),hn(c("div",Object.assign({},S,{class:[`${i}-tree-select-menu`,S?.class,this.themeClass],ref:"menuElRef",style:[S?.style||"",this.cssVars],tabindex:0,onMousedown:this.handleMenuMousedown,onKeydown:this.handleKeydown,onFocusin:this.handleMenuFocusin,onFocusout:this.handleMenuFocusout}),c(vn,{ref:"treeInstRef",blockLine:!0,allowCheckingNotLoaded:this.allowCheckingNotLoaded,showIrrelevantNodes:!1,animated:!1,pattern:this.pattern,getChildren:this.getChildren,filter:this.mergedFilter,data:N,cancelable:F,labelField:this.labelField,keyField:this.keyField,disabledField:this.disabledField,childrenField:this.childrenField,theme:n.peers.Tree,themeOverrides:n.peerOverrides.Tree,defaultExpandAll:this.defaultExpandAll,defaultExpandedKeys:this.defaultExpandedKeys,expandedKeys:this.mergedExpandedKeys,checkedKeys:this.treeCheckedKeys,selectedKeys:this.treeSelectedKeys,checkable:f,checkStrategy:this.checkStrategy,cascade:this.mergedCascade,leafOnly:this.leafOnly,multiple:this.multiple,renderLabel:this.renderLabel,renderPrefix:this.renderPrefix,renderSuffix:this.renderSuffix,renderSwitcherIcon:this.renderSwitcherIcon,nodeProps:this.nodeProps,watchProps:this.watchProps,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,overrideDefaultNodeClickBehavior:this.overrideDefaultNodeClickBehavior,internalTreeSelect:!0,internalUnifySelectCheck:!0,internalScrollable:!0,internalScrollablePadding:this.menuPadding,internalFocusable:!1,internalCheckboxFocusable:!1,internalRenderEmpty:()=>c("div",{class:`${i}-tree-select-menu__empty`},gn(r.empty,()=>[c(Cn,{theme:n.peers.Empty,themeOverrides:n.peerOverrides.Empty})])),onLoad:this.onLoad,onUpdateCheckedKeys:this.handleUpdateCheckedKeys,onUpdateIndeterminateKeys:this.handleUpdateIndeterminateKeys,onUpdateExpandedKeys:this.doUpdateExpandedKeys}),fn(r.action,P=>P?c("div",{class:`${i}-tree-select-menu__action`,"data-action":!0},P):null),c(bn,{onFocus:this.handleTabOut})),[[pn,this.handleMenuClickoutside,void 0,{capture:!0}]])}})})]}))}});export{An as N};
