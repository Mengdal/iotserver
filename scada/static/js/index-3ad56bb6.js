import{d as Ie,bU as o,r as U,u as xe,V as G,cM as E,X as Se,f as d,h as C,i as T,l as e,w as l,n as t,j as v,k as _,af as Te,p as u,t as c,e2 as D,aC as De,D as L,eT as Le,F as Pe,a9 as Fe,M as Re,ej as P,c as Oe,eU as Ae,a0 as F,e3 as Be,aH as $e,_ as Me,__tla as Ge}from"./index-35337fd3.js";import{u as Ne,F as R,E as h,__tla as Ve}from"./chartEditStore-a8bbc3da.js";import{i as He}from"./icon-ebc544b2.js";import"./plugin-11a308bb.js";let N,We=Promise.all([(()=>{try{return Ge}catch{}})(),(()=>{try{return Ve}catch{}})()]).then(async()=>{const V="/static/png/noImage.png",H={class:"go-canvas-setting"},W={class:"upload-box"},Y=["src"],K={class:"upload-img"},X={class:"picker-height"},q={style:{display:"flex","align-items":"center"}},J={style:{display:"flex","align-items":"center"}},Q={class:"footer"},Z=Ie({__name:"index",setup(Ye){let r=[{label:o.global.t("project.width")},{label:o.global.t("project.height")},{label:o.global.t("project.backgroundImageSizeLimit")},{label:o.global.t("project.fileFormatRequirement")},{label:o.global.t("project.backgroundColor")},{label:o.global.t("project.applicationType")},{label:o.global.t("project.backgroundControl")},{label:o.global.t("project.adaptationMethod")},{label:o.global.t("project.pagePassword")},{label:o.global.t("project.applicationColor")},{label:o.global.t("project.applicationBackground")},{label:o.global.t("project.clearColor")},{label:o.global.t("project.clearBackground")},{label:o.global.t("project.forceStretch")},{label:o.global.t("project.adaptiveDisplay")},{label:o.global.t("project.xAxisFullWidth")},{label:o.global.t("project.yAxisFullHeight")},{label:o.global.t("project.setPassword")},{label:o.global.t("project.securityPasswordSettings")},{label:o.global.t("project.password")},{label:o.global.t("project.enablePassword")},{label:o.global.t("project.enterPassword")}];const w=U(!1),ee=xe(),{ScaleIcon:ae,FitToScreenIcon:le,FitToHeightIcon:te,FitToWidthIcon:oe}=He.carbon,g=Ne(),n=g.getEditCanvasConfig,O=g.getEditCanvas,z=U(),I=U(!1),x=U(0),m=U({passwordData:"",isUse:!0}),S=G({get:()=>n.keepBad!==void 0?n.keepBad:!0,set:i=>{n.keepBad=i}}),A=G({get:()=>n.errorToValue!==void 0?n.errorToValue:"ERROR",set:i=>{n.errorToValue=i}}),se=()=>{let i=P("editId"),a=P(`${i}`);m.value.passwordData=Oe(a),w.value=!0},ie=async()=>{let i=P("editId");const a={password:m.value.passwordData,id:i||0,name:g.getEditCanvasConfig.projectName,used:m.value.isUse};(await Ae(a)).code===200?window.$message.success("\u8BBE\u7F6E\u6210\u529F\uFF01"):window.$message.error("\u8BBE\u7F6E\u5931\u8D25\uFF01"),w.value=!1},ne=i=>{m.value.isUse=i},de=[{label:o.global.t("project.applicationColor"),value:0},{label:o.global.t("project.applicationBackground"),value:1}],ce=[{key:E.FULL,title:"\u94FA\u6EE1",icon:le,desc:o.global.t("project.forceStretch")},{key:E.FIT,title:"\u81EA\u9002\u5E94",icon:ae,desc:o.global.t("project.adaptiveDisplay")},{key:E.SCROLL_Y,title:"Y\u8F74\u6EDA\u52A8",icon:oe,desc:o.global.t("project.xAxisFullWidth")},{key:E.SCROLL_X,title:"X\u8F74\u6EDA\u52A8",icon:te,desc:o.global.t("project.yAxisFullHeight")}];Se(()=>n.selectColor,i=>{x.value=i?0:1},{immediate:!0});const B=i=>i>50,$=()=>{g.computedScale()},re=async({file:i})=>{z.value=[];const a=i.file.type;return i.file.size>1024*1024*D?(window.$message.warning(`\u56FE\u7247\u8D85\u51FA ${D}M \u9650\u5236\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20\uFF01`),!1):a!==R.PNG&&a!==R.JPEG&&a!==R.GIF?(window.$message.warning("\u6587\u4EF6\u683C\u5F0F\u4E0D\u7B26\u5408\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20\uFF01"),!1):!0},ue=i=>{n.selectColor=i==0},pe=()=>{g.setEditCanvasConfig(h.BACKGROUND_IMAGE,void 0),g.setEditCanvasConfig(h.SELECT_COLOR,!0)},ge=()=>{I.value=!0,setTimeout(()=>{I.value=!1})},be=()=>{g.setEditCanvasConfig(h.BACKGROUND,void 0),n.backgroundImage&&g.setEditCanvasConfig(h.SELECT_COLOR,!1),ge()},ve=async i=>{const{file:a}=i;let y=new FormData;const j=F.type=="gateway"?"1":String(ee.projectDetail.id);console.log("file",a),y.append("image",a.file),y.append("projectId",j),Be(y).then(f=>{f.code==200&&$e(()=>{if(a.file){console.log("env.scadaProjectUrl",F.scadaProjectUrl),console.log("res.data.id",f.data.id);let p=`${F.scadaProjectUrl}/img/show?name=${f.data.name}&projectId=${j}&_t=${new Date().getTime()}`;g.setEditCanvasConfig(h.BACKGROUND_IMAGE,p),g.setEditCanvasConfig(h.SELECT_COLOR,!1)}})}).catch(f=>{console.log(f)})},me=i=>{g.setEditCanvasConfig(h.PREVIEW_SCALE_TYPE,i)};return(i,a)=>{const y=d("n-input-number"),j=d("n-form-item"),f=d("n-form"),p=d("n-text"),fe=d("n-upload-dragger"),_e=d("n-upload"),he=d("n-color-picker"),b=d("n-space"),we=d("n-select"),k=d("n-button"),ye=d("n-icon"),ke=d("n-tooltip"),Ce=d("n-button-group"),je=d("n-switch"),M=d("n-input"),Ue=d("n-checkbox"),Ee=d("n-card"),ze=d("n-modal");return C(),T("div",H,[e(f,{inline:"","label-width":45,size:"small","label-placement":"left"},{default:l(()=>[e(j,{label:t(r)[0].label},{default:l(()=>[v(" \u5C3A\u5BF8\u9009\u62E9 "),e(y,{size:"small",value:t(n).width,"onUpdate:value":[a[0]||(a[0]=s=>t(n).width=s),$],disabled:t(O).lockScale,validator:B},null,8,["value","disabled"])]),_:1},8,["label"]),e(j,{label:t(r)[1].label},{default:l(()=>[e(y,{size:"small",value:t(n).height,"onUpdate:value":[a[1]||(a[1]=s=>t(n).height=s),$],disabled:t(O).lockScale,validator:B},null,8,["value","disabled"])]),_:1},8,["label"])]),_:1}),_("div",W,[e(_e,{"file-list":z.value,"onUpdate:fileList":a[2]||(a[2]=s=>z.value=s),"show-file-list":!1,customRequest:ve,onBeforeUpload:re,accept:".png,.jpg,.gif"},{default:l(()=>[e(fe,null,{default:l(()=>[t(n).backgroundImage?(C(),T("img",{key:0,class:"upload-show",src:t(n).backgroundImage,alt:"\u80CC\u666F"},null,8,Y)):v("v-if",!0),Te(_("div",K,[a[11]||(a[11]=_("img",{src:V},null,-1)),e(p,{class:"upload-desc",depth:"3"},{default:l(()=>[u(c(t(r)[2].label)+" "+c(t(D))+"M ,"+c(t(r)[3].label),1)]),_:1})],512),[[De,!t(n).backgroundImage]])]),_:1})]),_:1},8,["file-list"])]),e(b,{vertical:"",size:12},{default:l(()=>[e(b,null,{default:l(()=>[e(p,null,{default:l(()=>[u(c(t(r)[4].label),1)]),_:1}),_("div",X,[I.value?v("v-if",!0):(C(),L(he,{key:0,size:"small",style:{width:"250px"},value:t(n).background,"onUpdate:value":a[3]||(a[3]=s=>t(n).background=s),showPreview:!0,swatches:t(Le)},null,8,["value","swatches"]))])]),_:1}),e(b,null,{default:l(()=>[e(p,null,{default:l(()=>[u(c(t(r)[5].label),1)]),_:1}),e(we,{size:"small",style:{width:"250px"},value:x.value,"onUpdate:value":[a[4]||(a[4]=s=>x.value=s),ue],disabled:!t(n).backgroundImage,options:de},null,8,["value","disabled"])]),_:1}),e(b,null,{default:l(()=>[e(p,null,{default:l(()=>[u(c(t(r)[6].label),1)]),_:1}),e(k,{class:"clear-btn",size:"small",disabled:!t(n).backgroundImage,onClick:pe},{default:l(()=>[u(c(t(r)[12].label),1)]),_:1},8,["disabled"]),e(k,{class:"clear-btn",size:"small",disabled:!t(n).background,onClick:be},{default:l(()=>[u(c(t(r)[11].label),1)]),_:1},8,["disabled"])]),_:1}),e(b,null,{default:l(()=>[e(p,null,{default:l(()=>[u(c(t(r)[7].label),1)]),_:1}),e(Ce,null,{default:l(()=>[(C(),T(Pe,null,Fe(ce,s=>e(k,{key:s.key,type:t(n).previewScaleType===s.key?"primary":"tertiary",ghost:"",size:"small",onClick:Ke=>me(s.key)},{default:l(()=>[e(ke,{"show-arrow":!1,trigger:"hover"},{trigger:l(()=>[e(ye,{class:"select-preview-icon",size:"18"},{default:l(()=>[(C(),L(Re(s.icon)))]),_:2},1024)]),default:l(()=>[u(" "+c(s.desc),1)]),_:2},1024)]),_:2},1032,["type","onClick"])),64))]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(p,null,{default:l(()=>[u(c(t(r)[8].label),1)]),_:1}),e(k,{size:"small",onClick:se},{default:l(()=>[u(c(t(r)[17].label),1)]),_:1})]),_:1}),e(b,null,{default:l(()=>[e(p,null,{default:l(()=>a[12]||(a[12]=[u(c("\u4FDD\u6301\u574F\u503C"))])),_:1}),e(je,{size:"small",value:S.value,"onUpdate:value":a[5]||(a[5]=s=>S.value=s)},null,8,["value"])]),_:1}),S.value==!1?(C(),L(b,{key:0},{default:l(()=>[e(p,null,{default:l(()=>a[13]||(a[13]=[u(c("\u574F\u503C\u8F6C\u6362"))])),_:1}),e(M,{size:"small",value:A.value,"onUpdate:value":a[6]||(a[6]=s=>A.value=s)},null,8,["value"])]),_:1})):v("v-if",!0)]),_:1}),v(` <n-modal v-model:show="showModal" preset="dialog" title="Dialog">
      <template #header>
        <div>\u5B89\u5168\u5BC6\u7801\u8BBE\u7F6E</div>
      </template>
      <div>\u5185\u5BB9</div>
      <template #action>
        <div>
          <n-button size="medium"  @click="!showModal">\u53D6 \u6D88</n-button>
          <n-button size="medium" type="primary" @click="onsubmit">\u4FDD \u5B58</n-button>
        </div>
      </template>
    </n-modal> `),e(ze,{show:w.value,"onUpdate:show":a[10]||(a[10]=s=>w.value=s)},{default:l(()=>[e(Ee,{style:{width:"450px",padding:"0"},title:t(r)[18].label,bordered:!1,size:"huge",role:"dialog","aria-modal":"true"},{footer:l(()=>[_("div",Q,[e(b,null,{default:l(()=>[e(k,{size:"medium",onClick:a[9]||(a[9]=s=>w.value=!w.value)},{default:l(()=>[u(c(t(o).global.t("project.cancel")),1)]),_:1}),e(k,{size:"medium",type:"primary",onClick:ie},{default:l(()=>[u(c(t(o).global.t("project.save")),1)]),_:1})]),_:1})])]),default:l(()=>[e(b,{vertical:""},{default:l(()=>[_("div",q,[e(p,{style:{width:"50px"}},{default:l(()=>[u(c(t(r)[19].label),1)]),_:1}),e(M,{placeholder:t(r)[21].label,type:"password","show-password-on":"click",value:m.value.passwordData,"onUpdate:value":a[7]||(a[7]=s=>m.value.passwordData=s)},null,8,["placeholder","value"])]),_("div",J,[e(p,{style:{"margin-right":"8px"}},{default:l(()=>[u(c(t(r)[20].label),1)]),_:1}),e(Ue,{"onUpdate:checked":[ne,a[8]||(a[8]=s=>m.value.isUse=s)],checked:m.value.isUse},null,8,["checked"])])]),_:1})]),_:1},8,["title"])]),_:1},8,["show"]),v(" \u6EE4\u955C "),v(` <styles-setting :isCanvas="true" :chartStyles="canvasConfig"></styles-setting>
    <n-divider style="margin: 10px 0"></n-divider> `),v(" \u4E3B\u9898\u9009\u62E9\u548C\u5168\u5C40\u914D\u7F6E "),v(` <n-tabs class="tabs-box" size="small" type="segment">
      <n-tab-pane
        v-for="item in globalTabList"
        :key="item.key"
        :name="item.key"
        size="small"
        display-directive="show:lazy"
      >
        <template #tab>
          <n-space>
            <span>{{ item.title }}</span>
            <n-icon size="16" class="icon-position">
              <component :is="item.icon"></component>
            </n-icon>
          </n-space>
        </template>
        <component :is="item.render"></component>
      </n-tab-pane>
    </n-tabs> `)])}}});N=Me(Z,[["__scopeId","data-v-b489ad26"],["__file","/Users/cyj/Desktop/work project/Scada-4.21/newScada/src/views/chart/ContentConfigurations/components/CanvasPage/index.vue"]])});export{We as __tla,N as default};
